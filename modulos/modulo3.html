<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso Java Profesional - M√≥dulo 3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="../assets/syle.css">
</head>

<body class="flex flex-col h-screen overflow-hidden">

    <!-- Header -->
    <header onclick="window.location.href='../index.html'"
        class="bg-slate-900 text-white p-4 shadow-lg flex justify-between items-center z-10 hover:bg-slate-800 transition">
        <div>
            <h1 class="text-2xl font-bold tracking-tight">‚òï Curso Profesional de Java</h1>
            <p class="text-slate-400 text-sm">M√≥dulo 3: Estructuras de Datos y Algoritmos Core</p>
        </div>
        <div class="text-xs bg-yellow-600 px-3 py-1 rounded-full font-semibold">Java 21 LTS</div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <!-- Sidebar Navigation -->
        <nav class="w-64 bg-white shadow-md overflow-y-auto hidden md:block border-r border-gray-200">
            <div class="p-4">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4">Temario del M√≥dulo</h3>
                <div class="space-y-1">
                    <button onclick="showLesson(11)" id="btn-11"
                        class="nav-btn active w-full text-left px-4 py-3 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100">
                        11: Arrays y Strings
                    </button>
                    <button onclick="showLesson(12)" id="btn-12"
                        class="nav-btn w-full text-left px-4 py-3 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100">
                        12: Excepciones
                    </button>
                    <button onclick="showLesson(13)" id="btn-13"
                        class="nav-btn w-full text-left px-4 py-3 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100">
                        13: List y Set
                    </button>
                    <button onclick="showLesson(14)" id="btn-14"
                        class="nav-btn w-full text-left px-4 py-3 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100">
                        14: Map y Queue
                    </button>
                    <button onclick="showLesson(15)" id="btn-15"
                        class="nav-btn w-full text-left px-4 py-3 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100">
                        15: Gen√©ricos
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-8 relative scroll-smooth">

            <!-- LECCI√ìN 11 -->
            <div id="lesson-11" class="lesson-section active max-w-4xl mx-auto">
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <span class="text-yellow-600 font-bold tracking-wide text-sm uppercase">Lecci√≥n 11</span>
                    <h1 class="text-4xl font-extrabold text-gray-900 mt-2">Arrays y Manipulaci√≥n de Strings</h1>
                </div>

                <div class="bg-yellow-50 p-6 rounded-lg mb-8 border border-yellow-100">
                    <h3 class="text-yellow-800 font-bold mb-2 !mt-0">üéØ Objetivos de √âlite</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Entender la f√≠sica de los Arrays: Memoria contigua y acceso O(1).</li>
                        <li>Profundizar en el <strong>String Pool</strong>: Optimizaci√≥n de memoria vs `new String()`.
                        </li>
                        <li>Complejidad Temporal: Por qu√© concatenar Strings en bucles es O(N¬≤).</li>
                        <li>Java Moderno: Bloques de texto (Text Blocks) y m√©todos de Java 21.</li>
                    </ul>
                </div>

                <h2>1. Teor√≠a Suprema: La Memoria y el Texto</h2>
                <p class="text-gray-700 mb-4">
                    Los Arrays son la estructura de datos m√°s b√°sica y eficiente. Son bloques de memoria contigua. Si
                    sabes d√≥nde empieza y el tama√±o del dato, saltar a la posici√≥n 1000 es instant√°neo.
                </p>

                <h3 class="text-lg font-bold text-gray-800">1.1 Inmutabilidad de Strings y el Pool</h3>
                <p class="text-gray-700 mb-4">
                    En Java, `String` es inmutable. Si modificas un texto, <strong>no lo cambias</strong>, creas uno
                    nuevo y descartas el viejo.
                    <br>
                    Para ahorrar RAM, Java mantiene un "String Pool" en el Heap.
                </p>

                <div class="warning-box">
                    <strong>El Pecado Capital del Rendimiento:</strong>
                    <br>Hacer `texto += "a"` dentro de un bucle de 10,000 iteraciones crea 10,000 objetos intermedios
                    que el Garbage Collector debe limpiar. Esto congela aplicaciones.
                </div>

                <h2>2. Laboratorio de C√≥digo</h2>
                <div class="code-block">
                    <pre><code class="language-java">public class OptimizacionStrings {
    public static void main(String[] args) {
        // String Pool: 'a' y 'b' apuntan al MISMO objeto en memoria.
        String a = "Java";
        String b = "Java"; 
        System.out.println(a == b); // true (Misma referencia)

        // FORMA INCORRECTA (Lenta)
        String lento = "";
        for (int i = 0; i < 1000; i++) {
            lento += i; // Crea un objeto String nuevo en CADA iteraci√≥n
        }

        // FORMA DE √âLITE (StringBuilder)
        // StringBuilder usa un array interno que se redimensiona inteligentemente.
        StringBuilder rapido = new StringBuilder();
        for (int i = 0; i < 1000; i++) {
            rapido.append(i); // Modifica el mismo objeto
        }
        
        // Java 15+: Text Blocks (Para JSON, SQL, HTML)
        String json = """
              {
                  "id": 1,
                  "nombre": "Experto"
              }
              """;
    }
}</code></pre>
                </div>

                <h2>3. Entrenamiento Progresivo</h2>

                <!-- EJERCICIO 1: VERDE -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-green">Nivel B√°sico</span>
                    <h4 class="font-bold text-gray-800 pr-20">Anal√≠tica de Texto</h4>
                    <p class="text-gray-600 mt-2">Dada una frase "Java es genial", convi√©rtela a un array de caracteres
                        (`toCharArray()`). Usa un bucle para contar cu√°ntas vocales tiene e imprime el resultado.</p>
                </div>

                <!-- EJERCICIO 2: AMARILLO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-yellow">Nivel Intermedio</span>
                    <h4 class="font-bold text-gray-800 pr-20">Inversi√≥n Eficiente</h4>
                    <p class="text-gray-600 mt-2">Crea un m√©todo que invierta una cadena (ej: "Hola" -> "aloH")
                        <strong>sin usar</strong> el m√©todo `reverse()` de StringBuilder. Usa un array de caracteres y
                        dos punteros (uno al inicio, otro al final) intercambiando valores hasta llegar al centro.
                    </p>
                    <div class="mt-3 bg-gray-50 p-3 rounded text-sm text-yellow-800 border border-yellow-100">
                        <strong>üí° Pista:</strong> Intercambia `arr[i]` con `arr[length - 1 - i]`.
                    </div>
                </div>

                <!-- EJERCICIO 3: ROJO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-red">Nivel Experto</span>
                    <h4 class="font-bold text-gray-800 pr-20">Algoritmo de Rotaci√≥n</h4>
                    <p class="text-gray-600 mt-2">Implementa un m√©todo que rote un array de enteros `k` veces a la
                        derecha. Ej: `[1, 2, 3, 4, 5]` con `k=2` se vuelve `[4, 5, 1, 2, 3]`. <br>Restricci√≥n de √âlite:
                        Hazlo con complejidad de espacio O(1) (sin crear arrays auxiliares completos).</p>

                    <button onclick="toggleSolution('sol-11')"
                        class="mt-3 text-sm font-semibold text-yellow-600 hover:text-yellow-800 underline">
                        üëÅÔ∏è Ver Soluci√≥n Gu√≠a
                    </button>

                    <div id="sol-11" class="solution-spoiler">
                        <p class="text-sm text-gray-300 mb-2">Truco: Invertir partes del array.</p>
                        <pre><code class="language-java">public void rotar(int[] nums, int k) {
    k %= nums.length; // Optimizaci√≥n si k > length
    invertir(nums, 0, nums.length - 1); // Invierte todo
    invertir(nums, 0, k - 1);           // Invierte primera parte
    invertir(nums, k, nums.length - 1); // Invierte segunda parte
}
// M√©todo auxiliar para invertir un rango
private void invertir(int[] nums, int start, int end) {
    while (start < end) {
        int temp = nums[start];
        nums[start] = nums[end];
        nums[end] = temp;
        start++; end--;
    }
}</code></pre>
                    </div>
                </div>

                <h2>4. Evaluaci√≥n de Conceptos</h2>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 space-y-4">
                    <div>
                        <p class="font-semibold text-gray-800">1. ¬øQu√© imprime `System.out.println("A" == new
                            String("A"));`?</p>
                        <select id="q11-1" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">true</option>
                            <option value="b">false</option>
                            <option value="c">Error de compilaci√≥n</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">2. ¬øPor qu√© `StringBuilder` es m√°s r√°pido que `String`
                            para concatenar?</p>
                        <select id="q11-2" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Porque usa threads paralelos.</option>
                            <option value="b">Porque es mutable y reutiliza su buffer interno.</option>
                            <option value="c">Porque ignora el Garbage Collector.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">3. ¬øQu√© complejidad temporal tiene acceder a un elemento
                            de array por √≠ndice?</p>
                        <select id="q11-3" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">O(1) - Constante</option>
                            <option value="b">O(n) - Lineal</option>
                            <option value="c">O(log n) - Logar√≠tmica</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">4. ¬øCu√°ndo se a√±ade un literal String al Pool?</p>
                        <select id="q11-4" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Al usar `new String()`.</option>
                            <option value="b">Al cargar la clase o encontrar el literal en el c√≥digo.</option>
                            <option value="c">Solo si llamamos a `.intern()`.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">5. ¬øQu√© pasa si `k` es mayor que la longitud del array en
                            una rotaci√≥n?</p>
                        <select id="q11-5" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Lanza IndexOutOfBoundsException.</option>
                            <option value="b">Debe usarse el operador m√≥dulo (%) para obtener la rotaci√≥n efectiva.
                            </option>
                            <option value="c">El array se vac√≠a.</option>
                        </select>
                    </div>
                    <button onclick="checkQuiz1()"
                        class="bg-yellow-600 text-white px-6 py-2 rounded hover:bg-yellow-700 w-full font-bold">Validar
                        Conocimientos</button>
                </div>
            </div>

            <!-- LECCI√ìN 12 -->
            <div id="lesson-12" class="lesson-section max-w-4xl mx-auto">
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <span class="text-yellow-600 font-bold tracking-wide text-sm uppercase">Lecci√≥n 12</span>
                    <h1 class="text-4xl font-extrabold text-gray-900 mt-2">Manejo Profesional de Excepciones</h1>
                </div>

                <div class="bg-yellow-50 p-6 rounded-lg mb-8 border border-yellow-100">
                    <h3 class="text-yellow-800 font-bold mb-2 !mt-0">üéØ Objetivos de √âlite</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Coste de Rendimiento: Por qu√© no debes usar excepciones para controlar el flujo l√≥gico.</li>
                        <li>Jerarqu√≠a Throwable: Error vs Exception vs RuntimeException.</li>
                        <li>Gesti√≥n de Recursos: `try-with-resources` y la interfaz `AutoCloseable`.</li>
                        <li>Dise√±o de API: Cu√°ndo forzar al usuario a capturar un error (Checked) y cu√°ndo no.</li>
                    </ul>
                </div>

                <h2>1. Teor√≠a Suprema: No es solo un "Error"</h2>
                <p class="text-gray-700 mb-4">
                    Crear una excepci√≥n en Java es <strong>caro</strong>. La JVM debe capturar toda la pila de llamadas
                    (stack trace) en ese instante.
                    <br>
                    Las excepciones son para situaciones <strong>excepcionales</strong>, no para validar si un usuario
                    introdujo mal un email (eso es validaci√≥n l√≥gica).
                </p>

                <h3 class="text-lg font-bold text-gray-800">1.1 Checked vs Unchecked</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-white p-5 rounded-lg border-l-4 border-red-500 shadow-sm">
                        <h4 class="font-bold text-red-700 mb-2">Checked (Verificadas)</h4>
                        <p class="text-sm text-gray-600">Heredan de `Exception`. El compilador te OBLIGA a manejarlas.
                            √ösalas para errores recuperables fuera de tu control (Red ca√≠da, Archivo no encontrado).</p>
                    </div>
                    <div class="bg-white p-5 rounded-lg border-l-4 border-orange-500 shadow-sm">
                        <h4 class="font-bold text-orange-700 mb-2">Unchecked (Runtime)</h4>
                        <p class="text-sm text-gray-600">Heredan de `RuntimeException`. Indican errores de programaci√≥n
                            (Bugs). No se deben capturar, se deben arreglar (NullPointer, IndexOutBounds).</p>
                    </div>
                </div>

                <h2>2. Laboratorio de C√≥digo</h2>
                <div class="code-block">
                    <pre><code class="language-java">import java.io.*;

public class FlujoSeguro {

    // Declaramos que este m√©todo PUEDE fallar
    public void leerDatos() throws IOException {
        
        // Try-with-resources (Java 7+)
        // Cualquier objeto que implemente AutoCloseable se cerrar√° solo al final.
        // Evita fugas de memoria (Memory Leaks) si ocurre un error.
        try (BufferedReader br = new BufferedReader(new FileReader("data.txt"))) {
            System.out.println(br.readLine());
        } 
        // No hace falta bloque 'finally' expl√≠cito para cerrar el archivo.
    }

    public void logicaNegocio(int valor) {
        if (valor < 0) {
            // Unchecked: Error l√≥gico del programador que llam√≥ al m√©todo
            throw new IllegalArgumentException("El valor no puede ser negativo");
        }
    }
}</code></pre>
                </div>

                <h2>3. Entrenamiento Progresivo</h2>

                <!-- EJERCICIO 1: VERDE -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-green">Nivel B√°sico</span>
                    <h4 class="font-bold text-gray-800 pr-20">Captura Segura</h4>
                    <p class="text-gray-600 mt-2">Escribe un c√≥digo que intente dividir `a / b`. Usa un bloque
                        `try-catch` para capturar `ArithmeticException` (divisi√≥n por cero) e imprime un mensaje
                        amigable. A√±ade un `finally` que imprima "Operaci√≥n terminada".</p>
                </div>

                <!-- EJERCICIO 2: AMARILLO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-yellow">Nivel Intermedio</span>
                    <h4 class="font-bold text-gray-800 pr-20">Excepci√≥n Sem√°ntica</h4>
                    <p class="text-gray-600 mt-2">Crea una clase de excepci√≥n personalizada `SaldoInsuficienteException`
                        (Checked). Crea una clase `Cuenta` con m√©todo `retirar(double cantidad)`. Si el saldo es menor a
                        la cantidad, lanza tu excepci√≥n.</p>
                    <div class="mt-3 bg-gray-50 p-3 rounded text-sm text-yellow-800 border border-yellow-100">
                        <strong>üí° Pista:</strong> Hereda de `Exception` y genera un constructor que reciba un mensaje.
                    </div>
                </div>

                <!-- EJERCICIO 3: ROJO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-red">Nivel Experto</span>
                    <h4 class="font-bold text-gray-800 pr-20">Exception Translation (Wrapping)</h4>
                    <p class="text-gray-600 mt-2">Simula una capa de acceso a datos. Crea un m√©todo que lance una
                        `SQLException` (simulada). Crea una capa de servicio que llame a ese m√©todo, capture la
                        excepci√≥n de bajo nivel y la relance envuelta en una `DatabaseException` (personalizada y
                        Unchecked) para no ensuciar la API con detalles SQL.</p>

                    <button onclick="toggleSolution('sol-12')"
                        class="mt-3 text-sm font-semibold text-yellow-600 hover:text-yellow-800 underline">
                        üëÅÔ∏è Ver Soluci√≥n Gu√≠a
                    </button>

                    <div id="sol-12" class="solution-spoiler">
                        <pre><code class="language-java">// Baja nivel
public void conectar() throws SQLException {
    throw new SQLException("Fallo de conexi√≥n");
}

// Alto nivel (Service)
public void procesarUsuario() {
    try {
        conectar();
    } catch (SQLException e) {
        // Envolver (Wrap) preservando la causa original
        throw new DatabaseRuntimeException("No se pudo procesar el usuario", e);
    }
}</code></pre>
                    </div>
                </div>

                <h2>4. Evaluaci√≥n de Conceptos</h2>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 space-y-4">
                    <div>
                        <p class="font-semibold text-gray-800">1. ¬øQu√© sucede si no cierras un recurso
                            (archivo/conexi√≥n)?</p>
                        <select id="q12-1" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Nada, el GC lo cierra r√°pido.</option>
                            <option value="b">Resource Leak (Fuga de recursos), puedes agotar los descriptores del SO.
                            </option>
                            <option value="c">Lanza StackOverflowError.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">2. ¬øEs buena pr√°ctica capturar `Exception` gen√©rica?</p>
                        <select id="q12-2" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">S√≠, ahorra c√≥digo.</option>
                            <option value="b">No, ocultas errores inesperados y dificultas el debugging.</option>
                            <option value="c">Solo en el main.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">3. ¬øQu√© interfaz debe implementar una clase para usarse
                            en try-with-resources?</p>
                        <select id="q12-3" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Serializable</option>
                            <option value="b">Runnable</option>
                            <option value="c">AutoCloseable</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">4. ¬øCu√°l es el costo principal de instanciar una
                            Excepci√≥n?</p>
                        <select id="q12-4" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">El mensaje de error.</option>
                            <option value="b">Llenar el Stack Trace (fillInStackTrace).</option>
                            <option value="c">La reserva de memoria en el Heap.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">5. ¬øDebo usar excepciones para controlar bucles?</p>
                        <select id="q12-5" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">S√≠, es elegante.</option>
                            <option value="b">No, es ineficiente y confuso.</option>
                            <option value="c">Depende del IDE.</option>
                        </select>
                    </div>
                    <button onclick="checkQuiz1()"
                        class="bg-yellow-600 text-white px-6 py-2 rounded hover:bg-yellow-700 w-full font-bold">Validar
                        Conocimientos</button>
                </div>
            </div>

            <!-- LECCI√ìN 13 -->
            <div id="lesson-13" class="lesson-section max-w-4xl mx-auto">
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <span class="text-yellow-600 font-bold tracking-wide text-sm uppercase">Lecci√≥n 13</span>
                    <h1 class="text-4xl font-extrabold text-gray-900 mt-2">Collections Framework I (List y Set)</h1>
                </div>

                <div class="bg-yellow-50 p-6 rounded-lg mb-8 border border-yellow-100">
                    <h3 class="text-yellow-800 font-bold mb-2 !mt-0">üéØ Objetivos de √âlite</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Complejidad Algor√≠tmica (Big O): Cu√°ndo usar qu√© lista.</li>
                        <li>`ArrayList` vs `LinkedList`: Por qu√© `LinkedList` casi nunca es la respuesta (Cache
                            Locality).</li>
                        <li>C√≥mo funciona un `HashSet`: Buckets y el contrato `hashCode`/`equals`.</li>
                        <li>Ordenamiento natural (`Comparable`) vs Ordenamiento externo (`Comparator`).</li>
                    </ul>
                </div>

                <h2>1. Teor√≠a Suprema: Ingenier√≠a de Datos</h2>
                <p class="text-gray-700 mb-4">
                    Elegir la colecci√≥n incorrecta puede hacer que tu aplicaci√≥n sea 1000 veces m√°s lenta.
                </p>

                <h3 class="text-lg font-bold text-gray-800">1.1 La Mentira de LinkedList</h3>
                <p class="text-gray-700 mb-4">
                    En teor√≠a, insertar en medio de una `LinkedList` es O(1). En la pr√°ctica, llegar a ese punto es O(N)
                    y los nodos est√°n dispersos en memoria, causando "Cache Misses" en la CPU.
                    <strong>`ArrayList`</strong> es casi siempre mejor porque usa memoria contigua, amigable para el
                    procesador.
                </p>

                <h3 class="text-lg font-bold text-gray-800">1.2 La Magia del Hash</h3>
                <p class="text-gray-700 mb-4">
                    `HashSet` no busca elemento por elemento. Usa el `hashCode()` del objeto para saltar directamente a
                    un "cubo" (bucket) de memoria. B√∫squeda instant√°nea O(1).
                </p>


                <h2>2. Laboratorio de C√≥digo</h2>
                <div class="code-block">
                    <pre><code class="language-java">import java.util.*;

public class ColeccionesPro {
    public static void main(String[] args) {
        // LISTA: Ordenada, permite duplicados
        // Siempre programa contra la Interfaz (List), no la implementaci√≥n.
        List<String> lista = new ArrayList<>();
        lista.add("Alfa");
        
        // SET: Sin orden garantizado, √öNICOS
        // Ideal para eliminar duplicados masivos r√°pidamente.
        Set<Integer> unicos = new HashSet<>();
        unicos.add(1);
        unicos.add(1); // Ignorado
        
        System.out.println(unicos.size()); // 1

        // Inmutabilidad (Java 9+)
        List<String> soloLectura = List.of("A", "B", "C");
        // soloLectura.add("D"); // Lanza UnsupportedOperationException
    }
}</code></pre>
                </div>

                <h2>3. Entrenamiento Progresivo</h2>

                <!-- EJERCICIO 1: VERDE -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-green">Nivel B√°sico</span>
                    <h4 class="font-bold text-gray-800 pr-20">Filtrado B√°sico</h4>
                    <p class="text-gray-600 mt-2">Crea un `ArrayList` de n√∫meros con valores repetidos. Crea un
                        `HashSet` y p√°sale la lista en el constructor para eliminar duplicados autom√°ticamente. Imprime
                        el resultado.</p>
                </div>

                <!-- EJERCICIO 2: AMARILLO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-yellow">Nivel Intermedio</span>
                    <h4 class="font-bold text-gray-800 pr-20">Ordenamiento Personalizado</h4>
                    <p class="text-gray-600 mt-2">Crea una clase `Tarea` (titulo, prioridad). Crea una `List<Tarea>`.
                            Ord√©nala por prioridad usando `Collections.sort` o `list.sort` pasando un `Comparator`
                            (lambda).</p>
                </div>

                <!-- EJERCICIO 3: ROJO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-red">Nivel Experto</span>
                    <h4 class="font-bold text-gray-800 pr-20">Rompiendo el HashSet</h4>
                    <p class="text-gray-600 mt-2">
                        1. Crea una clase `Persona` (nombre). <strong>Sobrescribe `equals` pero NO `hashCode`</strong>
                        (rompiendo el contrato).<br>
                        2. A√±ade dos personas "Juan" id√©nticas a un `HashSet`.<br>
                        3. Comprueba el tama√±o del Set. Deber√≠a ser 1, pero ser√° 2. Explica por qu√© Java fall√≥ en
                        detectar el duplicado.
                    </p>

                    <button onclick="toggleSolution('sol-13')"
                        class="mt-3 text-sm font-semibold text-yellow-600 hover:text-yellow-800 underline">
                        üëÅÔ∏è Ver Soluci√≥n Gu√≠a
                    </button>

                    <div id="sol-13" class="solution-spoiler">
                        <p class="text-sm text-gray-300">
                            <strong>Explicaci√≥n:</strong> HashSet usa primero el `hashCode` para encontrar el "cubo"
                            donde guardar el objeto. Si dos objetos id√©nticos tienen hashCodes distintos (comportamiento
                            por defecto de Object), van a cubos distintos y Java nunca llega a llamar a `equals` para
                            compararlos.
                        </p>
                    </div>
                </div>

                <h2>4. Evaluaci√≥n de Conceptos</h2>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 space-y-4">
                    <div>
                        <p class="font-semibold text-gray-800">1. ¬øQu√© pasa cuando un ArrayList se llena?</p>
                        <select id="q13-1" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Lanza excepci√≥n.</option>
                            <option value="b">Crea un nuevo array interno (generalmente 50% m√°s grande) y copia todo
                                (O(n)).</option>
                            <option value="c">Se convierte en LinkedList.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">2. ¬øCu√°l es el contrato entre equals y hashCode?</p>
                        <select id="q13-2" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Si equals es true, hashCode debe ser igual.</option>
                            <option value="b">Si hashCode es igual, equals debe ser true.</option>
                            <option value="c">No tienen relaci√≥n.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">3. ¬øQu√© estructura mantiene el orden de inserci√≥n y
                            unicidad?</p>
                        <select id="q13-3" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">HashSet</option>
                            <option value="b">TreeSet</option>
                            <option value="c">LinkedHashSet</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">4. ¬øComplejidad de b√∫squeda en LinkedList?</p>
                        <select id="q13-4" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">O(1)</option>
                            <option value="b">O(n)</option>
                            <option value="c">O(log n)</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">5. ¬øPara qu√© sirve TreeSet?</p>
                        <select id="q13-5" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Para guardar elementos duplicados.</option>
                            <option value="b">Para mantener elementos √∫nicos y ordenados autom√°ticamente.</option>
                            <option value="c">Para acceso r√°pido por √≠ndice.</option>
                        </select>
                    </div>
                    <button onclick="checkQuiz1()"
                        class="bg-yellow-600 text-white px-6 py-2 rounded hover:bg-yellow-700 w-full font-bold">Validar
                        Conocimientos</button>
                </div>
            </div>

            <!-- LECCI√ìN 14 -->
            <div id="lesson-14" class="lesson-section max-w-4xl mx-auto">
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <span class="text-yellow-600 font-bold tracking-wide text-sm uppercase">Lecci√≥n 14</span>
                    <h1 class="text-4xl font-extrabold text-gray-900 mt-2">Collections Framework II (Map y Queue)</h1>
                </div>

                <div class="bg-yellow-50 p-6 rounded-lg mb-8 border border-yellow-100">
                    <h3 class="text-yellow-800 font-bold mb-2 !mt-0">üéØ Objetivos de √âlite</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Arquitectura interna del `HashMap`: Buckets, Nodos y √Årboles Rojo-Negro.</li>
                        <li>Resolver colisiones de Hash eficientemente.</li>
                        <li>Usar `Queue` y `Deque` para algoritmos de procesamiento (Colas de mensajes, Stacks).</li>
                        <li>`PriorityQueue`: El secreto para algoritmos de "Top K" elementos.</li>
                    </ul>
                </div>

                <h2>1. Teor√≠a Suprema: El Motor Clave-Valor</h2>
                <p class="text-gray-700 mb-4">
                    `HashMap` es la estructura m√°s utilizada. Internamente es un Array de Listas (o √Årboles).
                </p>
                <ul class="list-disc list-inside text-gray-700 space-y-2 ml-4 mb-4">
                    <li><strong>Colisi√≥n:</strong> Cuando dos claves distintas generan el mismo Hash. Java las encadena
                        en el mismo bucket.</li>
                    <li><strong>Factor de Carga:</strong> Si el mapa se llena al 75% (0.75), duplica su tama√±o y
                        re-calcula todas las posiciones (Rehashing). Costoso.</li>
                </ul>

                <h2>2. Laboratorio de C√≥digo</h2>
                <div class="code-block">
                    <pre><code class="language-java">import java.util.*;

public class MapasAvanzados {
    public static void main(String[] args) {
        // Map: Diccionario Clave -> Valor
        Map<String, Integer> inventario = new HashMap<>();
        inventario.put("Manzana", 10);
        
        // getOrDefault: Evita NullPointerException de forma elegante
        int cantidad = inventario.getOrDefault("Pera", 0);

        // Iteraci√≥n eficiente sobre el EntrySet (Clave y Valor a la vez)
        for (Map.Entry<String, Integer> entry : inventario.entrySet()) {
            System.out.println(entry.getKey() + ": " + entry.getValue());
        }

        // PriorityQueue: Mantiene el orden natural (el menor sale primero)
        // √ötil para procesar tareas por prioridad.
        Queue<Integer> cola = new PriorityQueue<>();
        cola.add(50);
        cola.add(10);
        cola.add(30);
        
        System.out.println(cola.poll()); // Imprime 10 (El menor)
    }
}</code></pre>
                </div>

                <h2>3. Entrenamiento Progresivo</h2>

                <!-- EJERCICIO 1: VERDE -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-green">Nivel B√°sico</span>
                    <h4 class="font-bold text-gray-800 pr-20">Agenda Telef√≥nica</h4>
                    <p class="text-gray-600 mt-2">Crea un `HashMap<String, String>` (Nombre -> Tel√©fono). A√±ade 3
                            contactos. Usa `containsKey("Pepe")` para ver si existe antes de intentar obtener su n√∫mero.
                    </p>
                </div>

                <!-- EJERCICIO 2: AMARILLO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-yellow">Nivel Intermedio</span>
                    <h4 class="font-bold text-gray-800 pr-20">Contador de Palabras</h4>
                    <p class="text-gray-600 mt-2">Dada una frase larga, usa un Map para contar la frecuencia de cada
                        palabra. <br>Pista: Usa `map.put(palabra, map.getOrDefault(palabra, 0) + 1)`.</p>
                </div>

                <!-- EJERCICIO 3: ROJO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-red">Nivel Experto</span>
                    <h4 class="font-bold text-gray-800 pr-20">LRU Cache (Least Recently Used)</h4>
                    <p class="text-gray-600 mt-2">Implementa un sistema de cach√© simple que guarde m√°ximo N elementos.
                        Si a√±ades uno nuevo y est√° lleno, debe borrar el m√°s antiguo (el que menos se ha usado).
                        <br><strong>Truco de Experto:</strong> Extiende de `LinkedHashMap` y sobreescribe el m√©todo
                        `removeEldestEntry`. Se hace en 5 l√≠neas de c√≥digo.
                    </p>

                    <button onclick="toggleSolution('sol-14')"
                        class="mt-3 text-sm font-semibold text-yellow-600 hover:text-yellow-800 underline">
                        üëÅÔ∏è Ver Soluci√≥n Gu√≠a
                    </button>

                    <div id="sol-14" class="solution-spoiler">
                        <pre><code class="language-java">import java.util.LinkedHashMap;
import java.util.Map;

// accessOrder = true activa el modo LRU (reordena al acceder)
public class LRUCache<K, V> extends LinkedHashMap<K, V> {
    private final int capacity;

    public LRUCache(int capacity) {
        super(capacity, 0.75f, true);
        this.capacity = capacity;
    }

    @Override
    protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {
        return size() > capacity; // Borra el m√°s viejo si excedemos capacidad
    }
}</code></pre>
                    </div>
                </div>

                <h2>4. Evaluaci√≥n de Conceptos</h2>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 space-y-4">
                    <div>
                        <p class="font-semibold text-gray-800">1. ¬øQu√© es una colisi√≥n en un HashMap?</p>
                        <select id="q14-1" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Cuando se acaba la memoria.</option>
                            <option value="b">Cuando dos claves distintas producen el mismo hash.</option>
                            <option value="c">Cuando insertas un valor null.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">2. ¬øQu√© estructura usar√≠as para una cola FIFO?</p>
                        <select id="q14-2" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Stack</option>
                            <option value="b">PriorityQueue</option>
                            <option value="c">ArrayDeque (usado como Queue)</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">3. ¬øQu√© garantiza LinkedHashMap?</p>
                        <select id="q14-3" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Orden natural de claves.</option>
                            <option value="b">Orden de inserci√≥n o acceso.</option>
                            <option value="c">B√∫squedas m√°s r√°pidas que HashMap.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">4. ¬øEn Java 8+, qu√© pasa si un bucket tiene muchos
                            elementos?</p>
                        <select id="q14-4" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Se redimensiona el array.</option>
                            <option value="b">La lista enlazada se transforma en un √Årbol (Red-Black Tree) para mejorar
                                rendimiento a O(log n).</option>
                            <option value="c">Lanza excepci√≥n.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">5. ¬øPuede un TreeMap tener claves null?</p>
                        <select id="q14-5" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">S√≠.</option>
                            <option value="b">No, porque necesita comparar claves para ordenar.</option>
                            <option value="c">Depende del comparador.</option>
                        </select>
                    </div>
                    <button onclick="checkQuiz1()"
                        class="bg-yellow-600 text-white px-6 py-2 rounded hover:bg-yellow-700 w-full font-bold">Validar
                        Conocimientos</button>
                </div>
            </div>

            <!-- LECCI√ìN 15 -->
            <div id="lesson-15" class="lesson-section max-w-4xl mx-auto">
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <span class="text-yellow-600 font-bold tracking-wide text-sm uppercase">Lecci√≥n 15</span>
                    <h1 class="text-4xl font-extrabold text-gray-900 mt-2">Gen√©ricos (Generics)</h1>
                </div>

                <div class="bg-yellow-50 p-6 rounded-lg mb-8 border border-yellow-100">
                    <h3 class="text-yellow-800 font-bold mb-2 !mt-0">üéØ Objetivos de √âlite</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Seguridad de Tipos: Detectar errores al compilar, no al ejecutar.</li>
                        <li>Type Erasure: La ilusi√≥n de los gen√©ricos y lo que realmente ve la JVM.</li>
                        <li>Comodines (Wildcards): Dominar `? extends` y `? super` (Principio PECS).</li>
                        <li>Dise√±ar APIs gen√©ricas flexibles.</li>
                    </ul>
                </div>

                <h2>1. Teor√≠a Suprema: La Ilusi√≥n del Tipo</h2>
                <p class="text-gray-700 mb-4">
                    Los Gen√©ricos se a√±adieron en Java 5 para evitar el casting manual constante (`(String)
                    lista.get(0)`).
                    <br>
                    <strong>Type Erasure:</strong> Para mantener compatibilidad con versiones viejas, Java BORRA la
                    informaci√≥n de tipos al compilar. `List<String>` se convierte en `List` (raw type) en el bytecode.
                        Por eso no puedes hacer `new T()`.
                </p>

                <h3 class="text-lg font-bold text-gray-800">1.1 Invarianza vs Covarianza</h3>
                <div class="warning-box">
                    <strong>¬°Cuidado!</strong> `List<Perro>` NO es hija de `List<Animal>`, aunque Perro sea hijo de
                            Animal.
                            <br>Si lo fuera, podr√≠as pasar una lista de Perros a un m√©todo que espera lista de Animales,
                            y ese m√©todo podr√≠a meter un Gato. ¬°Boom! Error en tiempo de ejecuci√≥n.
                </div>

                <h2>2. Laboratorio de C√≥digo</h2>
                <div class="code-block">
                    <pre><code class="language-java">public class Caja<T> {
    private T contenido;

    public void guardar(T contenido) {
        this.contenido = contenido;
    }

    public T sacar() {
        return contenido;
    }

    // PECS: Producer Extends, Consumer Super
    // Producer Extends: Solo LEEMOS de la lista (produce datos)
    public static double sumarNumeros(List<? extends Number> lista) {
        double suma = 0;
        for (Number n : lista) { // Seguro leer como Number
            suma += n.doubleValue();
        }
        // lista.add(10); // ERROR: No podemos escribir, no sabemos el tipo exacto
        return suma;
    }
}</code></pre>
                </div>

                <h2>3. Entrenamiento Progresivo</h2>

                <!-- EJERCICIO 1: VERDE -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-green">Nivel B√°sico</span>
                    <h4 class="font-bold text-gray-800 pr-20">Clase Gen√©rica</h4>
                    <p class="text-gray-600 mt-2">Crea una clase `Bolsa<T>` que tenga un m√©todo `add(T item)` y `List<T>
                                getItems()`. Limita la bolsa a m√°ximo 5 elementos. Prueba guardando Strings y luego
                                Integers en bolsas distintas.</p>
                </div>

                <!-- EJERCICIO 2: AMARILLO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-yellow">Nivel Intermedio</span>
                    <h4 class="font-bold text-gray-800 pr-20">M√©todo de Intercambio</h4>
                    <p class="text-gray-600 mt-2">Escribe un m√©todo gen√©rico est√°tico `void swap(T[] array, int i, int
                        j)` que intercambie elementos en un array de cualquier tipo.</p>
                </div>

                <!-- EJERCICIO 3: ROJO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-red">Nivel Experto</span>
                    <h4 class="font-bold text-gray-800 pr-20">API Flexible (Wildcards)</h4>
                    <p class="text-gray-600 mt-2">Implementa un m√©todo `copy` que copie elementos de una lista origen a
                        una destino. <br>Firma: `void copy(List
                        <? extends T> src, List<? super T> dest)`. <br>Demuestra por qu√© esto permite copiar una `List<Integer>` a una `List<Number>`, pero no al rev√©s.</p>
                    
                    <button onclick="toggleSolution('sol-15')" class="mt-3 text-sm font-semibold text-yellow-600 hover:text-yellow-800 underline">
                        üëÅÔ∏è Ver Soluci√≥n Gu√≠a
                    </button>
                    
                    <div id="sol-15" class="solution-spoiler">
                        <pre><code class="language-java">public static <T> void copy(List<? extends T> source, List<? super T> dest) {
    for (T item : source) {
        dest.add(item);
    }
}
// Uso:
// List<Integer> ints = List.of(1, 2);
// List<Number> nums = new ArrayList<>();
// copy(ints, nums); // Funciona: Integer extiende Number</code></pre>
                    </div>
                </div>

                <h2>4. Evaluaci√≥n de Conceptos</h2>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 space-y-4">
                    <div>
                        <p class="font-semibold text-gray-800">1. ¬øPor qu√© `new T()` no es v√°lido?</p>
                        <select id="q15-1" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Porque T es abstracta.</option>
                            <option value="b">Por el Type Erasure, en runtime T no existe.</option>
                            <option value="c">Porque falta el constructor.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">2. ¬øQu√© significa `? extends Number`?</p>
                        <select id="q15-2" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Cualquier clase que sea Number o hija de Number.</option>
                            <option value="b">Cualquier clase padre de Number.</option>
                            <option value="c">Solo Number.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">3. ¬øQu√© restricci√≥n aplica PECS para `? extends T`?</p>
                        <select id="q15-3" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Solo escritura.</option>
                            <option value="b">Solo lectura (Producer).</option>
                            <option value="c">Lectura y escritura.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">4. ¬øLos gen√©ricos existen en el bytecode compilado?</p>
                        <select id="q15-4" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">S√≠, Java retiene toda la info.</option>
                            <option value="b">No, son borrados y reemplazados por casts (Type Erasure).</option>
                            <option value="c">Solo si usas la versi√≥n Java 21.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">5. ¬øEs `Object[]` compatible con `String[]`?</p>
                        <select id="q15-5" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">S√≠, los arrays son covariantes (riesgo de ArrayStoreException).</option>
                            <option value="b">No, los arrays funcionan como gen√©ricos.</option>
                            <option value="c">Solo para lectura.</option>
                        </select>
                    </div>
                    <button onclick="checkQuiz1()" class="bg-yellow-600 text-white px-6 py-2 rounded hover:bg-yellow-700 w-full font-bold">Validar Conocimientos</button>
                </div>
            </div>

        </main>
    </div>

    <!-- Scripts para interactividad -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script>
        function showLesson(id) {
            document.querySelectorAll('.lesson-section').forEach(el => {
                el.classList.remove('active');
                el.style.display = 'none';
            });
            const selected = document.getElementById('lesson-' + id);
            selected.style.display = 'block';
            setTimeout(() => selected.classList.add('active'), 10);

            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + id).classList.add('active');
            document.querySelector('main').scrollTop = 0;
        }

        function toggleSolution(id) {
            const el = document.getElementById(id);
            if (el.style.display === 'block') el.style.display = 'none';
            else el.style.display = 'block';
        }

        // Validaci√≥n simple para Quiz
        function checkQuiz1() {
            alert("¬°Respuestas registradas! Revisa la secci√≥n 'Teor√≠a Suprema' para asegurar conceptos.");
        }

        // Init
        showLesson(11);
    </script>
</body>
</html>