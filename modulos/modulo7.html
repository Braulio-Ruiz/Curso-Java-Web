<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso Java Profesional - M√≥dulo 7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <style>
        header {
            cursor: pointer;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3f4f6;
        }

        .code-block {
            border-radius: 0.5rem;
            overflow: hidden;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }

        .lesson-section {
            display: none;
        }

        .lesson-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        h2 {
            color: #1e3a8a;
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 0.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: bold;
            font-size: 1.5rem;
        }

        h3 {
            color: #1f2937;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            font-size: 1.25rem;
        }

        .nav-btn {
            transition: all 0.3s;
        }

        .nav-btn.active {
            background-color: #2563eb;
            color: white;
            border-left: 4px solid #1e40af;
        }

        .tip-box {
            background-color: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        .warning-box {
            background-color: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        .best-practice {
            background-color: #ecfdf5;
            border: 1px solid #10b981;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .exercise-card {
            background: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            margin-bottom: 1rem;
            border: 1px solid #e5e7eb;
            position: relative;
        }

        .difficulty-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .badge-green {
            background-color: #dcfce7;
            color: #166534;
        }

        .badge-yellow {
            background-color: #fef9c3;
            color: #854d0e;
        }

        .badge-red {
            background-color: #fee2e2;
            color: #991b1b;
        }

        .solution-spoiler {
            display: none;
            background: #1f2937;
            color: #e5e7eb;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            border-left: 4px solid #4f46e5;
        }
    </style>
</head>

<body class="flex flex-col h-screen overflow-hidden">

    <!-- Header -->
    <header onclick="window.location.href='../index.html'"
        class="bg-slate-900 text-white p-4 shadow-lg flex justify-between items-center z-10 hover:bg-slate-800 transition">
        <div>
            <h1 class="text-2xl font-bold tracking-tight">‚òï Curso Profesional de Java</h1>
            <p class="text-slate-400 text-sm">M√≥dulo 7: Arquitectura, Servicios Web y Proyecto Final</p>
        </div>
        <div class="text-xs bg-indigo-600 px-3 py-1 rounded-full font-semibold">Java 21 LTS</div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <!-- Sidebar Navigation -->
        <nav class="w-64 bg-white shadow-md overflow-y-auto hidden md:block border-r border-gray-200">
            <div class="p-4">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4">Temario del M√≥dulo</h3>
                <div class="space-y-1">
                    <button onclick="showLesson(28)" id="btn-28"
                        class="nav-btn active w-full text-left px-4 py-3 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100">
                        Lecci√≥n 28: Servicios Web (HTTP)
                    </button>
                    <button onclick="showLesson(29)" id="btn-29"
                        class="nav-btn w-full text-left px-4 py-3 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100">
                        Lecci√≥n 29: SOLID y Patrones
                    </button>
                    <button onclick="showLesson(30)" id="btn-30"
                        class="nav-btn w-full text-left px-4 py-3 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100">
                        Lecci√≥n 30: Proyecto Final
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-8 relative scroll-smooth">

            <!-- LECCI√ìN 28 -->
            <div id="lesson-28" class="lesson-section active max-w-4xl mx-auto">
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <span class="text-indigo-600 font-bold tracking-wide text-sm uppercase">Lecci√≥n 28</span>
                    <h1 class="text-4xl font-extrabold text-gray-900 mt-2">Servicios Web: Cliente HTTP Moderno</h1>
                </div>

                <div class="bg-indigo-50 p-6 rounded-lg mb-8 border border-indigo-100">
                    <h3 class="text-indigo-800 font-bold mb-2 !mt-0">üéØ Objetivos de √âlite</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Entender la arquitectura cliente-servidor: REST vs SOAP.</li>
                        <li>Dominar el `HttpClient` de Java 11+: Asincron√≠a y Flujos Reactivos.</li>
                        <li>Gesti√≥n de Timeouts y Errores de Red (Resiliencia).</li>
                        <li>Parsing de respuestas JSON integrando Jackson (M√≥dulo 6).</li>
                    </ul>
                </div>

                <h2>1. Teor√≠a Suprema: Hablando el Idioma de Internet</h2>
                <p class="text-gray-700 mb-4">
                    [Image of REST API architecture diagram]
                    Tu aplicaci√≥n Java rara vez vivir√° aislada. Necesitar√° consultar el clima, procesar pagos
                    (Stripe/PayPal) o autenticar usuarios (OAuth). Para eso usamos HTTP.
                    <br>
                    <strong>REST (Representational State Transfer)</strong> es el est√°ndar actual. Usa verbos HTTP
                    (`GET`, `POST`, `PUT`, `DELETE`) para operar sobre recursos (`/usuarios`, `/productos`).
                </p>

                <h3 class="text-lg font-bold text-gray-800">1.1 java.net.http.HttpClient</h3>
                <p class="text-gray-700 mb-4">
                    Olv√≠date de `HttpURLConnection` (Antiguo, bloqueante, dif√≠cil de usar). Desde Java 11, tenemos un
                    cliente nativo moderno que soporta HTTP/2, WebSocket y es totalmente as√≠ncrono
                    (`CompletableFuture`).
                </p>

                <h2>2. Laboratorio de C√≥digo</h2>
                <div class="code-block">
                    <pre><code class="language-java">import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.time.Duration;
import java.util.concurrent.CompletableFuture;

public class ClienteApi {

    // Cliente reutilizable (Thread-safe) - Crear uno solo por app
    private static final HttpClient client = HttpClient.newBuilder()
            .version(HttpClient.Version.HTTP_2)
            .connectTimeout(Duration.ofSeconds(5)) // ¬°Siempre define timeouts!
            .build();

    public static void main(String[] args) {
        // Construir Petici√≥n
        HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create("https://jsonplaceholder.typicode.com/posts/1"))
                .header("Accept", "application/json")
                .GET()
                .build();

        // Enviar de forma As√≠ncrona (No bloquea el hilo principal)
        CompletableFuture<Void> futuro = client.sendAsync(request, HttpResponse.BodyHandlers.ofString())
                .thenApply(HttpResponse::body)
                .thenAccept(cuerpo -> System.out.println("Respuesta recibida: " + cuerpo))
                .exceptionally(ex -> {
                    System.err.println("Error de red: " + ex.getMessage());
                    return null;
                });

        // Simular que hacemos otra cosa mientras esperamos
        System.out.println("Esperando respuesta... (El hilo main sigue libre)");
        
        futuro.join(); // Esperar para ver el resultado en este ejemplo
    }
}</code></pre>
                </div>

                <div class="best-practice">
                    <h4 class="font-bold text-green-800 flex items-center gap-2">‚ú® Clean Code & Best Practices</h4>
                    <p class="text-green-900 mt-2">
                        <strong>Timeouts Obligatorios:</strong> Nunca dejes una conexi√≥n abierta indefinidamente. Si el
                        servidor remoto se cuelga, tu aplicaci√≥n se quedar√° esperando (Zombie) y consumir√° todos los
                        recursos hasta morir. Siempre configura `connectTimeout` y `timeout` en el request.
                    </p>
                </div>

                <h2>3. Entrenamiento Progresivo</h2>

                <!-- EJERCICIO 1: VERDE -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-green">Nivel B√°sico</span>
                    <h4 class="font-bold text-gray-800 pr-20">Consumo Simple</h4>
                    <p class="text-gray-600 mt-2">Usa `HttpClient` para hacer una petici√≥n GET s√≠ncrona (`send`) a
                        `https://api.github.com/zen`. Imprime el c√≥digo de estado (deber√≠a ser 200) y el cuerpo del
                        mensaje.</p>
                </div>

                <!-- EJERCICIO 2: AMARILLO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-yellow">Nivel Intermedio</span>
                    <h4 class="font-bold text-gray-800 pr-20">Env√≠o de Datos (POST)</h4>
                    <p class="text-gray-600 mt-2">Crea un JSON String `{"title":"foo","body":"bar","userId":1}`. Env√≠a
                        una petici√≥n POST a `https://jsonplaceholder.typicode.com/posts`. Aseg√∫rate de poner el header
                        `Content-Type: application/json`. Verifica que recibes un 201 (Created).</p>
                </div>

                <!-- EJERCICIO 3: ROJO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-red">Nivel Experto</span>
                    <h4 class="font-bold text-gray-800 pr-20">Race Request (Petici√≥n de Carrera)</h4>
                    <p class="text-gray-600 mt-2">Lanza 3 peticiones as√≠ncronas simult√°neas a tres endpoints diferentes
                        (simulados o reales). Usa `CompletableFuture.allOf` para esperar a que TODAS terminen antes de
                        imprimir "Proceso completado". Si alguna falla, maneja la excepci√≥n sin detener las otras.</p>

                    <button onclick="toggleSolution('sol-28')"
                        class="mt-3 text-sm font-semibold text-indigo-600 hover:text-indigo-800 underline">
                        üëÅÔ∏è Ver Soluci√≥n Gu√≠a
                    </button>

                    <div id="sol-28" class="solution-spoiler">
                        <pre><code class="language-java">// Lista de URIs
List<URI> uris = List.of(URI.create(".../1"), URI.create(".../2"), URI.create(".../3"));

var futuros = uris.stream()
    .map(uri -> client.sendAsync(HttpRequest.newBuilder(uri).build(), HttpResponse.BodyHandlers.ofString())
            .thenAccept(res -> System.out.println("Le√≠do: " + res.uri()))
            .exceptionally(e -> { System.err.println("Fallo: " + e); return null; }))
    .toArray(CompletableFuture[]::new);

CompletableFuture.allOf(futuros).join();
System.out.println("Proceso completado");</code></pre>
                    </div>
                </div>

                <h2>4. Evaluaci√≥n de Conceptos</h2>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 space-y-4">
                    <div>
                        <p class="font-semibold text-gray-800">1. ¬øQu√© c√≥digo HTTP indica √©xito en una petici√≥n GET?</p>
                        <select id="q28-1" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">404</option>
                            <option value="b">200</option>
                            <option value="c">500</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">2. ¬øQu√© ventaja tiene `HttpClient` sobre librer√≠as
                            externas como Apache HttpClient?</p>
                        <select id="q28-2" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Es m√°s lento.</option>
                            <option value="b">Viene integrado en el JDK, no requiere dependencias extra.</option>
                            <option value="c">Soporta SOAP nativamente.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">3. ¬øQu√© verbo HTTP se usa para actualizar un recurso
                            existente?</p>
                        <select id="q28-3" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">GET</option>
                            <option value="b">POST</option>
                            <option value="c">PUT / PATCH</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">4. ¬øQu√© es JSON?</p>
                        <select id="q28-4" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">JavaScript Object Notation, formato ligero de intercambio de datos.
                            </option>
                            <option value="b">Java Serialized Object Network.</option>
                            <option value="c">Un protocolo de red.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">5. ¬øPor qu√© usamos m√©todos as√≠ncronos en clientes HTTP?
                        </p>
                        <select id="q28-5" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Para bloquear la interfaz de usuario.</option>
                            <option value="b">Para liberar el hilo principal mientras esperamos la respuesta de red (I/O
                                no bloqueante).</option>
                            <option value="c">Para consumir m√°s memoria.</option>
                        </select>
                    </div>
                    <button onclick="checkQuiz1()"
                        class="bg-indigo-600 text-white px-6 py-2 rounded hover:bg-indigo-700 w-full font-bold">Validar
                        Conocimientos</button>
                </div>
            </div>

            <!-- LECCI√ìN 29 -->
            <div id="lesson-29" class="lesson-section max-w-4xl mx-auto">
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <span class="text-indigo-600 font-bold tracking-wide text-sm uppercase">Lecci√≥n 29</span>
                    <h1 class="text-4xl font-extrabold text-gray-900 mt-2">Principios SOLID y Patrones de Dise√±o</h1>
                </div>

                <div class="bg-indigo-50 p-6 rounded-lg mb-8 border border-indigo-100">
                    <h3 class="text-indigo-800 font-bold mb-2 !mt-0">üéØ Objetivos de √âlite</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Dejar de escribir c√≥digo "Spaghetti".</li>
                        <li>Entender los 5 pilares SOLID (especialmente SRP y OCP).</li>
                        <li>Implementar Patrones de Dise√±o clave: Singleton (versi√≥n segura), Factory y Strategy.</li>
                        <li>Saber cu√°ndo <strong>NO</strong> usar un patr√≥n (KISS - Keep It Simple, Stupid).</li>
                    </ul>
                </div>

                <h2>1. Teor√≠a Suprema: Arquitectura Sostenible</h2>
                <p class="text-gray-700 mb-4">
                    Escribir c√≥digo que funcione lo hace cualquiera. Escribir c√≥digo que se pueda mantener dentro de 5
                    a√±os es ingenier√≠a.
                    <br>
                    <strong>SOLID</strong> no son reglas, son gu√≠as para gestionar la <strong>Dependencia</strong>.
                </p>
                [Image of SOLID principles diagram]
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-white p-5 rounded-lg border-l-4 border-blue-500 shadow-sm">
                        <h4 class="font-bold text-blue-700 mb-2">S - Single Responsibility</h4>
                        <p class="text-sm text-gray-600">Una clase debe tener <strong>una sola raz√≥n para
                                cambiar</strong>. No mezcles l√≥gica de base de datos con l√≥gica de env√≠o de emails.</p>
                    </div>
                    <div class="bg-white p-5 rounded-lg border-l-4 border-purple-500 shadow-sm">
                        <h4 class="font-bold text-purple-700 mb-2">O - Open/Closed</h4>
                        <p class="text-sm text-gray-600">Abierto para extensi√≥n, cerrado para modificaci√≥n. Usa
                            polimorfismo para a√±adir funcionalidad sin tocar c√≥digo viejo.</p>
                    </div>
                </div>

                <h2>2. Laboratorio de C√≥digo: Patr√≥n Strategy</h2>
                <p class="text-gray-700 mb-2">Este es el patr√≥n m√°s √∫til para cumplir con el principio Open/Closed.
                    Evita los `if-else` gigantes.</p>
                <div class="code-block">
                    <pre><code class="language-java">// 1. Interfaz Estrategia (El contrato)
interface DescuentoStrategy {
    double aplicar(double precio);
}

// 2. Estrategias Concretas (Implementaciones)
class SinDescuento implements DescuentoStrategy {
    public double aplicar(double precio) { return precio; }
}

class DescuentoNavidad implements DescuentoStrategy {
    public double aplicar(double precio) { return precio * 0.90; } // 10% off
}

// 3. Contexto (Usa la estrategia sin saber cu√°l es)
class CalculadoraPrecios {
    private DescuentoStrategy estrategia;

    public CalculadoraPrecios(DescuentoStrategy estrategia) {
        this.estrategia = estrategia;
    }

    public double calcularFinal(double precioBase) {
        return estrategia.aplicar(precioBase);
    }
}</code></pre>
                </div>

                <div class="best-practice">
                    <h4 class="font-bold text-green-800 flex items-center gap-2">‚ú® Clean Code Tip</h4>
                    <p class="text-green-900 mt-2">
                        <strong>Singleton con Enums:</strong> La forma cl√°sica de Singleton (`private static instance`)
                        es insegura ante multihilo y reflexi√≥n. En Java, la forma can√≥nica es usar un `enum` de un solo
                        elemento.
                        <br>`public enum BaseDeDatos { INSTANCIA; public void conectar() {...} }`
                    </p>
                </div>

                <h2>3. Entrenamiento Progresivo</h2>

                <!-- EJERCICIO 1: VERDE -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-green">Nivel B√°sico</span>
                    <h4 class="font-bold text-gray-800 pr-20">Detectando SRP</h4>
                    <p class="text-gray-600 mt-2">Tienes una clase `Usuario` que guarda datos (nombre, email), valida el
                        email con regex, guarda en BD y env√≠a correo de bienvenida. Refactor√≠zala dividi√©ndola en 3
                        clases: `Usuario` (Datos), `UsuarioRepository` (BD) y `EmailService` (Correo).</p>
                </div>

                <!-- EJERCICIO 2: AMARILLO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-yellow">Nivel Intermedio</span>
                    <h4 class="font-bold text-gray-800 pr-20">Factory Method</h4>
                    <p class="text-gray-600 mt-2">Crea una interfaz `Notificacion` con m√©todo `enviar(msg)`. Crea
                        implementaciones `EmailNotificacion` y `SMSNotificacion`. Crea una clase `NotificacionFactory`
                        con un m√©todo est√°tico que reciba el tipo ("email" o "sms") y devuelva la instancia correcta.
                    </p>
                </div>

                <!-- EJERCICIO 3: ROJO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-red">Nivel Experto</span>
                    <h4 class="font-bold text-gray-800 pr-20">Refactorizaci√≥n OCP</h4>
                    <p class="text-gray-600 mt-2">Tienes una clase `Reporte` con un m√©todo gigante lleno de `if (tipo ==
                        "PDF") ... else if (tipo == "HTML") ...`. <br>Aplica el patr√≥n <strong>Strategy</strong> para
                        eliminar los condicionales. Crea una interfaz `GeneradorReporte` y clases concretas. El c√≥digo
                        cliente debe inyectar la estrategia deseada.</p>
                </div>

                <h2>4. Evaluaci√≥n de Conceptos</h2>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 space-y-4">
                    <div>
                        <p class="font-semibold text-gray-800">1. ¬øQu√© patr√≥n asegura que solo exista una instancia de
                            una clase?</p>
                        <select id="q29-1" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Factory</option>
                            <option value="b">Singleton</option>
                            <option value="c">Observer</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">2. En SOLID, ¬øqu√© es la "D" (Dependency Inversion)?</p>
                        <select id="q29-2" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Depender de abstracciones, no de concreciones.</option>
                            <option value="b">Invertir el control del flujo.</option>
                            <option value="c">No usar dependencias.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">3. ¬øQu√© patr√≥n usamos para crear objetos sin especificar
                            la clase exacta?</p>
                        <select id="q29-3" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Strategy</option>
                            <option value="b">Factory Method</option>
                            <option value="c">Decorator</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">4. ¬øQu√© problema resuelve el Principio de Responsabilidad
                            √önica (SRP)?</p>
                        <select id="q29-4" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Clases lentas.</option>
                            <option value="b">Clases "Dios" (God Objects) dif√≠ciles de mantener y testear.</option>
                            <option value="c">Falta de herencia.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">5. ¬øCu√°l es la mejor forma de implementar un Singleton en
                            Java moderno?</p>
                        <select id="q29-5" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Clase con constructor privado y m√©todo est√°tico.</option>
                            <option value="b">Enum.</option>
                            <option value="c">Variable global p√∫blica.</option>
                        </select>
                    </div>
                    <button onclick="checkQuiz1()"
                        class="bg-indigo-600 text-white px-6 py-2 rounded hover:bg-indigo-700 w-full font-bold">Validar
                        Conocimientos</button>
                </div>
            </div>

            <!-- LECCI√ìN 30 -->
            <div id="lesson-30" class="lesson-section max-w-4xl mx-auto">
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <span class="text-indigo-600 font-bold tracking-wide text-sm uppercase">Lecci√≥n 30</span>
                    <h1 class="text-4xl font-extrabold text-gray-900 mt-2">Proyecto Final y Despliegue</h1>
                </div>

                <div class="bg-indigo-50 p-6 rounded-lg mb-8 border border-indigo-100">
                    <h3 class="text-indigo-800 font-bold mb-2 !mt-0">üéØ Objetivos de √âlite</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Construir una **Arquitectura en Capas** real (Controller, Service, Repository).</li>
                        <li>Aplicar Inyecci√≥n de Dependencias manual (preparaci√≥n para Spring).</li>
                        <li>Empaquetado profesional: Crear un **Fat JAR** ejecutable.</li>
                        <li>Ejecuci√≥n en producci√≥n: JVM flags y variables de entorno.</li>
                    </ul>
                </div>

                <h2>1. Teor√≠a Suprema: Arquitectura por Capas</h2>
                <p class="text-gray-700 mb-4">
                    [Image of Layered architecture diagram]
                    El c√≥digo profesional no se escribe todo en el `main`. Se divide en responsabilidades horizontales.
                </p>
                <div class="space-y-4 mb-6">
                    <div class="bg-white p-4 rounded border-l-4 border-blue-500 shadow">
                        <h4 class="font-bold text-blue-700">1. Controller / Presentaci√≥n</h4>
                        <p class="text-sm">Habla con el usuario (Consola, REST, Web). Recibe datos, valida formato y
                            llama al Servicio. No sabe de bases de datos.</p>
                    </div>
                    <div class="bg-white p-4 rounded border-l-4 border-purple-500 shadow">
                        <h4 class="font-bold text-purple-700">2. Service (Dominio)</h4>
                        <p class="text-sm">El cerebro. Contiene la l√≥gica de negocio (Reglas, c√°lculos, orquestaci√≥n).
                            No sabe si los datos vienen de SQL o de un archivo.</p>
                    </div>
                    <div class="bg-white p-4 rounded border-l-4 border-green-500 shadow">
                        <h4 class="font-bold text-green-700">3. Repository (Persistencia)</h4>
                        <p class="text-sm">El trabajador. Habla SQL, lee archivos. Su √∫nica misi√≥n es guardar y
                            recuperar datos.</p>
                    </div>
                </div>

                <h2>2. Laboratorio de C√≥digo: El Proyecto Final</h2>
                <div class="code-block">
                    <pre><code class="language-java">// 1. Interfaz del Repositorio (DIP - Dependency Inversion Principle)
interface LibroRepository {
    void guardar(String libro);
}

// 2. Implementaci√≥n concreta
class FileLibroRepository implements LibroRepository {
    public void guardar(String libro) {
        System.out.println("Guardando en archivo: " + libro);
        // L√≥gica real de Files.writeString...
    }
}

// 3. Servicio (Depende de la Abstracci√≥n, no de la implementaci√≥n)
class BibliotecaService {
    private final LibroRepository repo;

    // Inyecci√≥n de Dependencias por Constructor
    public BibliotecaService(LibroRepository repo) {
        this.repo = repo;
    }

    public void registrarLibro(String titulo) {
        if (titulo.isEmpty()) throw new IllegalArgumentException("T√≠tulo vac√≠o");
        repo.guardar(titulo.toUpperCase()); // L√≥gica de negocio
    }
}

// 4. Main (El ensamblador)
public class MainApp {
    public static void main(String[] args) {
        // Wiring (Cableado de dependencias)
        LibroRepository repositorio = new FileLibroRepository();
        BibliotecaService servicio = new BibliotecaService(repositorio);

        // Ejecuci√≥n
        servicio.registrarLibro("Java Clean Code");
    }
}</code></pre>
                </div>

                <h2>3. Despliegue: Del IDE al Servidor</h2>
                <p class="text-gray-700 mb-4">
                    Tu cliente no tiene IntelliJ. Necesitas entregarle un artefacto ejecutable. En Java, esto es un
                    <strong>JAR (Java ARchive)</strong>.
                </p>
                <div class="bg-slate-800 text-green-400 font-mono p-4 rounded text-sm mb-4">
                    # 1. Compilar y empaquetar (usando Maven/Gradle)<br>
                    $ mvn clean package<br><br>
                    # Esto genera un archivo en /target/mi-app-1.0.jar<br><br>
                    # 2. Ejecutar en cualquier lugar (Linux, Windows, Cloud)<br>
                    $ java -jar mi-app-1.0.jar
                </div>

                <h2>4. Entrenamiento Progresivo</h2>

                <!-- EJERCICIO 1: VERDE -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-green">Nivel B√°sico</span>
                    <h4 class="font-bold text-gray-800 pr-20">Estructura de Paquetes</h4>
                    <p class="text-gray-600 mt-2">Crea un nuevo proyecto y organiza los paquetes: `com.app.controller`,
                        `com.app.service`, `com.app.repository`, `com.app.model`. Crea una clase dummy en cada uno para
                        verificar la visibilidad.</p>
                </div>

                <!-- EJERCICIO 2: AMARILLO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-yellow">Nivel Intermedio</span>
                    <h4 class="font-bold text-gray-800 pr-20">Inyecci√≥n Manual</h4>
                    <p class="text-gray-600 mt-2">Implementa un `UsuarioController` que dependa de `UsuarioService`. En
                        el `main`, instancia ambos y pasa el servicio al controlador manualmente. Llama a un m√©todo del
                        controlador que delegue en el servicio.</p>
                </div>

                <!-- EJERCICIO 3: ROJO -->
                <div class="exercise-card">
                    <span class="difficulty-badge badge-red">Nivel Experto</span>
                    <h4 class="font-bold text-gray-800 pr-20">Mocking Manual (Testing)</h4>
                    <p class="text-gray-600 mt-2">Como tu Servicio depende de una interfaz `Repository`, crea una
                        implementaci√≥n falsa `MockRepository` que guarde los datos en una lista en memoria en vez de
                        base de datos. <br>√ösala en un Test Unitario para probar la l√≥gica del Servicio sin tocar el
                        disco duro ni SQL.</p>

                    <button onclick="toggleSolution('sol-30')"
                        class="mt-3 text-sm font-semibold text-indigo-600 hover:text-indigo-800 underline">
                        üëÅÔ∏è Ver Soluci√≥n Gu√≠a
                    </button>

                    <div id="sol-30" class="solution-spoiler">
                        <pre><code class="language-java">class MockRepository implements LibroRepository {
    public boolean guardado = false;
    @Override
    public void guardar(String libro) {
        this.guardado = true;
    }
}

// En el Test
MockRepository mock = new MockRepository();
BibliotecaService service = new BibliotecaService(mock);
service.registrarLibro("Test");
assert(mock.guardado == true); // Verificar que el servicio llam√≥ al repo</code></pre>
                    </div>
                </div>

                <h2>5. Evaluaci√≥n Final</h2>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 space-y-4">
                    <div>
                        <p class="font-semibold text-gray-800">1. ¬øQu√© capa debe contener las reglas de negocio?</p>
                        <select id="q30-1" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Controller</option>
                            <option value="b">Service</option>
                            <option value="c">Repository</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">2. ¬øPor qu√© usamos interfaces para los Repositorios?</p>
                        <select id="q30-2" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Para complicar el c√≥digo.</option>
                            <option value="b">Para desacoplar el negocio de la implementaci√≥n de datos (SQL vs Archivo
                                vs Memoria).</option>
                            <option value="c">Porque Java lo obliga.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">3. ¬øQu√© comando ejecuta un archivo JAR?</p>
                        <select id="q30-3" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">java -cp archivo.jar</option>
                            <option value="b">java start archivo.jar</option>
                            <option value="c">java -jar archivo.jar</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">4. ¬øQui√©n debe instanciar las dependencias en una app
                            simple sin Spring?</p>
                        <select id="q30-4" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">El m√©todo main (o una clase de configuraci√≥n).</option>
                            <option value="b">Cada clase se instancia sus propias dependencias.</option>
                            <option value="c">El Garbage Collector.</option>
                        </select>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">5. ¬øQu√© es un "Fat JAR"?</p>
                        <select id="q30-5" class="w-full p-2 border rounded mt-1">
                            <option value="">Elegir...</option>
                            <option value="a">Un JAR comprimido.</option>
                            <option value="b">Un JAR que contiene todas sus dependencias (librer√≠as) dentro, listo para
                                ejecutar.</option>
                            <option value="c">Un JAR mal optimizado.</option>
                        </select>
                    </div>
                    <button onclick="checkQuiz1()"
                        class="bg-indigo-600 text-white px-6 py-2 rounded hover:bg-indigo-700 w-full font-bold">Graduarse
                        üéì</button>
                </div>
            </div>

        </main>
    </div>

    <!-- Scripts para interactividad -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script>
        function showLesson(id) {
            document.querySelectorAll('.lesson-section').forEach(el => {
                el.classList.remove('active');
                el.style.display = 'none';
            });
            const selected = document.getElementById('lesson-' + id);
            selected.style.display = 'block';
            setTimeout(() => selected.classList.add('active'), 10);

            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + id).classList.add('active');
            document.querySelector('main').scrollTop = 0;
        }

        function toggleSolution(id) {
            const el = document.getElementById(id);
            if (el.style.display === 'block') el.style.display = 'none';
            else el.style.display = 'block';
        }

        // Validaci√≥n simple para Quiz
        function checkQuiz1() {
            alert("¬°Felicidades! Has completado el Curso Profesional de Java. Ahora ve y construye sistemas incre√≠bles.");
        }

        // Init
        showLesson(28);
    </script>
</body>

</html>