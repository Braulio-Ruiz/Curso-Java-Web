<!DOCTYPE html>
<html lang="es" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo 2 | POO Avanzada & Arquitectura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" rel="stylesheet" />
    <script src="../assets/scriptHead.js"></script>
</head>

<body
    class="flex flex-col h-screen bg-slate-50 text-slate-800 antialiased selection:bg-purple-500 selection:text-white overflow-hidden">

    <nav
        class="fixed w-full z-50 bg-slate-900/95 backdrop-blur-md border-b border-slate-700/50 text-white h-16 flex items-center justify-between px-6 shadow-lg">
        <div class="flex items-center gap-4">
            <a href="../index.html"
                class="group flex items-center gap-2 text-slate-300 hover:text-white transition-all bg-white/5 hover:bg-white/10 px-4 py-2 rounded-lg border border-white/10 hover:border-white/20">
                <i class="fas fa-arrow-left text-sm group-hover:-translate-x-1 transition-transform"></i>
                <span class="text-sm font-medium">Dashboard</span>
            </a>
            <div class="h-6 w-px bg-slate-700 mx-2"></div>
            <div class="flex items-center gap-3">
                <div class="bg-purple-600/20 p-2 rounded-lg border border-purple-500/30 text-purple-400">
                    <i class="fas fa-cubes text-lg"></i>
                </div>
                <div>
                    <h1 class="font-bold text-sm tracking-wide leading-none">Módulo 02</h1>
                    <span class="text-xs text-slate-400 font-medium">Arquitectura Orientada a Objetos</span>
                </div>
            </div>
        </div>
        <div class="hidden md:flex items-center gap-4">
            <div class="flex items-center gap-2 px-3 py-1.5 bg-purple-900/30 rounded-full border border-purple-500/20">
                <span class="relative flex h-2 w-2">
                    <span
                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-purple-500"></span>
                </span>
                <span class="text-xs font-semibold text-purple-300">Java 21 LTS</span>
            </div>
        </div>
    </nav>

    <div class="flex flex-1 pt-16 h-full overflow-hidden">
        <aside class="w-80 bg-white border-r border-slate-200 shadow-xl z-20 hidden md:flex flex-col">
            <div class="p-6 border-b border-slate-100 bg-slate-50/50">
                <h3 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-1">Contenido del Módulo</h3>
                <p class="text-sm text-slate-600 font-medium">5 Lecciones de Arquitectura</p>
            </div>
            <div class="flex-1 overflow-y-auto custom-scrollbar p-4 space-y-2">
                <button onclick="showLesson(6)" id="btn-6"
                    class="nav-btn w-full text-left px-4 py-4 rounded-xl text-sm font-medium transition-all duration-200 border border-transparent hover:bg-purple-50 hover:border-purple-200 group relative overflow-hidden active">
                    <div class="relative z-10 flex items-center gap-3">
                        <span
                            class="flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold group-hover:bg-white group-hover:shadow-sm transition-all btn-icon">06</span>
                        <span class="text-slate-600 group-hover:text-slate-900 btn-text">Memoria y Objetos</span>
                    </div>
                    <div
                        class="absolute left-0 top-0 bottom-0 w-1 bg-purple-600 opacity-0 btn-indicator transition-opacity">
                    </div>
                </button>
                <button onclick="showLesson(7)" id="btn-7"
                    class="nav-btn w-full text-left px-4 py-4 rounded-xl text-sm font-medium transition-all duration-200 border border-transparent hover:bg-purple-50 hover:border-purple-200 group relative overflow-hidden">
                    <div class="relative z-10 flex items-center gap-3">
                        <span
                            class="flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold group-hover:bg-white group-hover:shadow-sm transition-all btn-icon">07</span>
                        <span class="text-slate-600 group-hover:text-slate-900 btn-text">Encapsulamiento Real</span>
                    </div>
                    <div
                        class="absolute left-0 top-0 bottom-0 w-1 bg-purple-600 opacity-0 btn-indicator transition-opacity">
                    </div>
                </button>
                <button onclick="showLesson(8)" id="btn-8"
                    class="nav-btn w-full text-left px-4 py-4 rounded-xl text-sm font-medium transition-all duration-200 border border-transparent hover:bg-purple-50 hover:border-purple-200 group relative overflow-hidden">
                    <div class="relative z-10 flex items-center gap-3">
                        <span
                            class="flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold group-hover:bg-white group-hover:shadow-sm transition-all btn-icon">08</span>
                        <span class="text-slate-600 group-hover:text-slate-900 btn-text">Herencia y vTables</span>
                    </div>
                    <div
                        class="absolute left-0 top-0 bottom-0 w-1 bg-purple-600 opacity-0 btn-indicator transition-opacity">
                    </div>
                </button>
                <button onclick="showLesson(9)" id="btn-9"
                    class="nav-btn w-full text-left px-4 py-4 rounded-xl text-sm font-medium transition-all duration-200 border border-transparent hover:bg-purple-50 hover:border-purple-200 group relative overflow-hidden">
                    <div class="relative z-10 flex items-center gap-3">
                        <span
                            class="flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold group-hover:bg-white group-hover:shadow-sm transition-all btn-icon">09</span>
                        <span class="text-slate-600 group-hover:text-slate-900 btn-text">Interfaces & Decoupling</span>
                    </div>
                    <div
                        class="absolute left-0 top-0 bottom-0 w-1 bg-purple-600 opacity-0 btn-indicator transition-opacity">
                    </div>
                </button>
                <button onclick="showLesson(10)" id="btn-10"
                    class="nav-btn w-full text-left px-4 py-4 rounded-xl text-sm font-medium transition-all duration-200 border border-transparent hover:bg-purple-50 hover:border-purple-200 group relative overflow-hidden">
                    <div class="relative z-10 flex items-center gap-3">
                        <span
                            class="flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold group-hover:bg-white group-hover:shadow-sm transition-all btn-icon">10</span>
                        <span class="text-slate-600 group-hover:text-slate-900 btn-text">Data Carriers (Records)</span>
                    </div>
                    <div
                        class="absolute left-0 top-0 bottom-0 w-1 bg-purple-600 opacity-0 btn-indicator transition-opacity">
                    </div>
                </button>
            </div>
        </aside>

        <main class="flex-1 overflow-y-auto relative bg-slate-50 scroll-smooth">
            <div class="max-w-5xl mx-auto px-8 py-12 relative z-10">

                <div id="lesson-6" class="lesson-section active animate-fade-in-up lesson-content">
                    <div class="mb-8 border-b border-slate-200 pb-6">
                        <div class="flex items-center gap-3 mb-2">
                            <span
                                class="px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-bold uppercase tracking-wider">Lección
                                06</span>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-black text-slate-900 tracking-tight mb-4">Object Layout:
                            Metaspace, Heap y Headers</h1>
                    </div>

                    <div
                        class="bg-white rounded-2xl p-8 shadow-lg shadow-purple-900/5 border-l-4 border-purple-600 mb-10">
                        <h3 class="!mt-0 text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                            <i class="fas fa-microchip text-purple-600"></i> Ingeniería Interna
                        </h3>
                        <p class="text-slate-600 mb-4">Más allá de la sintaxis, un Ingeniero de Software debe entender
                            cómo la JVM estructura los objetos en la memoria física para optimizar el acceso y la
                            recolección de basura.</p>
                        <div class="grid md:grid-cols-2 gap-4 text-sm">
                            <div class="flex items-start gap-3"><i
                                    class="fas fa-check text-green-500 mt-1"></i><span><strong>Object Overhead:</strong>
                                    Mark Word y Klass Pointer (64-bit architecture).</span></div>
                            <div class="flex items-start gap-3"><i
                                    class="fas fa-check text-green-500 mt-1"></i><span><strong>Reference
                                        Aliasing:</strong> Peligros de mutabilidad compartida en el Stack.</span></div>
                        </div>
                    </div>

                    <h2>1. El Ciclo de Vida: Metaspace vs Heap</h2>
                    <p>Al ejecutar <code>new Usuario()</code>, la JVM realiza una operación compleja descrita en la JLS
                        §12.5. Primero, verifica si la clase <code>Usuario</code> está cargada en el
                        <strong>Metaspace</strong> (memoria nativa fuera del Heap donde residen los metadatos de las
                        clases). Si no, el <em>ClassLoader</em> la carga.
                    </p>

                    <p>Posteriormente, se reserva espacio en el <strong>Heap</strong>. Un objeto Java no son solo sus
                        datos. Cada objeto tiene una cabecera (Header) de 12-16 bytes que contiene:</p>
                    <ul class="list-disc list-inside text-slate-600 ml-4 mb-4">
                        <li><strong>Mark Word:</strong> Contiene el hashcode, bits de bloqueo (para
                            <code>synchronized</code>) y bits para el Garbage Collector (GC Age).
                        </li>
                        <li><strong>Klass Pointer:</strong> Un puntero comprimido que indica a qué clase pertenece este
                            objeto en el Metaspace.</li>
                    </ul>

                    <p>La variable <code>Usuario u</code> es un puntero de 64 bits en el <strong>Stack Frame</strong>
                        que referencia esa dirección de memoria. Entender que <code>u</code> no <em>es</em> el objeto,
                        sino su <em>dirección</em>, es clave para entender el Aliasing.</p>

                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-r-xl mb-8">
                        <h4 class="font-bold text-yellow-800 mb-1">Concepto Clave: Constructor Chaining</h4>
                        <p class="text-yellow-800 text-sm">
                            El comando <code>new</code> reserva y limpia la memoria (pone ceros binarios). Luego, la JVM
                            invoca el constructor <code>&lt;init&gt;</code>. El encadenamiento mediante
                            <code>this()</code> o <code>super()</code> garantiza que la jerarquía de herencia se
                            inicialice desde <code>Object</code> hacia abajo, asegurando un estado consistente antes de
                            usar la instancia.
                        </p>
                    </div>

                    <h2 class="text-slate-900 border-none mb-6 mt-12"><i
                            class="fas fa-dumbbell text-purple-600 mr-2"></i>Training Ground</h2>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            BÁSICO</div>
                        <h4 class="font-bold text-slate-800 mb-2">Inicialización Estricta</h4>
                        <p class="text-sm text-slate-600 mb-4">Crea una clase <code>Vehiculo</code>. Implementa un
                            constructor que obligue a inicializar todos los campos <code>final</code>. Intenta compilar
                            sin inicializar uno de ellos y analiza el error de la JLS.</p>
                        <details class="text-sm text-slate-500 cursor-pointer">
                            <summary>Ver Pista</summary>Los campos <code>final</code> deben ser asignados exactamente
                            una vez antes de que termine el constructor.
                        </details>
                    </div>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-yellow-100 text-yellow-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            INTERMEDIO</div>
                        <h4 class="font-bold text-slate-800 mb-2">Constructor Overloading (DRY)</h4>
                        <p class="text-sm text-slate-600 mb-4">Usa <code>this(...)</code> para redirigir constructores
                            secundarios al constructor principal (Canonical Constructor). Esto centraliza la lógica de
                            validación en un solo punto.</p>
                    </div>

                    <div
                        class="mb-6 p-6 bg-slate-900 rounded-xl border border-slate-700 shadow-lg relative overflow-hidden text-white">
                        <div
                            class="absolute top-0 right-0 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl">
                            AVANZADO</div>
                        <h4 class="font-bold text-white mb-2">Reference Aliasing y Mutabilidad</h4>
                        <p class="text-sm text-slate-400 mb-4">Demuestra el peligro de compartir referencias. Crea
                            <code>v1</code>. Asigna <code>v2 = v1</code>. Modifica el estado interno de <code>v2</code>
                            y demuestra que <code>v1</code> ha sido "corrompido" sin tocarlo directamente.
                        </p>
                        <button onclick="toggleSolution('sol-6')"
                            class="text-xs bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded transition">Ver
                            Solución</button>
                        <div id="sol-6" class="hidden mt-4 pt-4 border-t border-slate-700">
                            <pre><code class="language-java">Vehiculo v1 = new Vehiculo("Toyota");
Vehiculo v2 = v1; // Copia de la dirección de memoria (Pointer), no del objeto.

v2.setMarca("Mazda"); 
// v1.getMarca() ahora retorna "Mazda".
// Esto es la causa raíz de muchos bugs de concurrencia.</code></pre>
                        </div>
                    </div>

                    <div class="mt-10 pt-8 border-t border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-4">Quiz de Validación</h3>
                        <div class="space-y-3 text-sm">
                            <p><strong>1. ¿Dónde se almacena la cabecera (Mark Word) de un objeto?</strong></p>
                            <div class="grid grid-cols-2 gap-2">
                                <div class="quiz-option border rounded p-2 text-center">Stack Frame</div>
                                <div class="quiz-option border rounded p-2 text-center"
                                    onclick="alert('¡Correcto! Junto con los datos del objeto en el Heap.')">Heap
                                    (Cabecera del Objeto)</div>
                            </div>
                            <p class="mt-4"><strong>2. ¿Qué ocurre si un campo final no es inicializado en el
                                    constructor?</strong></p>
                            <div class="quiz-option border rounded p-2"
                                onclick="alert('¡Correcto! Error en tiempo de compilación.')">Error de compilación.
                            </div>
                            <div class="quiz-option border rounded p-2">Se inicializa a null/0 por defecto.</div>
                        </div>
                    </div>
                </div>

                <div id="lesson-7" class="lesson-section hidden animate-fade-in-up lesson-content">
                    <div class="mb-8 border-b border-slate-200 pb-6">
                        <div class="flex items-center gap-3 mb-2">
                            <span
                                class="px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-bold uppercase tracking-wider">Lección
                                07</span>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-black text-slate-900 tracking-tight mb-4">Encapsulamiento
                            Real: Invariantes y Diseño Defensivo</h1>
                    </div>

                    <p class="text-slate-600 mb-6">El encapsulamiento es el pilar de la seguridad en POO. No se trata
                        simplemente de ocultar datos, sino de <strong>proteger invariantes</strong>. Un invariante es
                        una regla de negocio que debe ser verdadera durante todo el ciclo de vida del objeto (ej: "El
                        saldo nunca puede ser negativo").</p>

                    <h3 class="text-xl font-bold text-slate-800 mt-8 mb-4">Principio "Tell, Don't Ask" y Anemic Models
                    </h3>
                    <p class="text-slate-600 mb-4">Un objeto lleno de Getters y Setters sin lógica es un anti-patrón
                        conocido como <strong>Anemic Domain Model</strong>. Rompe el encapsulamiento porque delega la
                        validación de sus datos a clases externas.</p>
                    <p>En lugar de pedir datos (<code>Ask</code>) para operarlos fuera, ordena al objeto que ejecute una
                        acción (<code>Tell</code>). El objeto es el único responsable de mantener su estado consistente.
                    </p>

                    <div class="grid md:grid-cols-2 gap-6 mb-8">
                        <div class="bg-red-50 p-4 rounded-xl border border-red-200">
                            <h4 class="text-red-800 font-bold mb-2">❌ Procedural (Anemic)</h4>
                            <pre class="text-xs bg-white p-2 rounded"><code class="language-java">// La lógica de negocio se fuga fuera de la clase
if (cuenta.getSaldo() >= 100) {
    cuenta.setSaldo(cuenta.getSaldo() - 100);
}
// Peligro: Alguien más podría hacer setSaldo(-500)</code></pre>
                        </div>
                        <div class="bg-green-50 p-4 rounded-xl border border-green-200">
                            <h4 class="text-green-800 font-bold mb-2">✅ OO Puro (Rich Model)</h4>
                            <pre class="text-xs bg-white p-2 rounded"><code class="language-java">// La clase Cuenta protege su invariante
try {
    cuenta.retirar(100); 
} catch (SaldoInsuficienteException e) {
    // Manejo de error
}</code></pre>
                        </div>
                    </div>

                    <h2 class="text-slate-900 border-none mb-6 mt-12"><i
                            class="fas fa-dumbbell text-purple-600 mr-2"></i>Training Ground</h2>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            BÁSICO</div>
                        <h4 class="font-bold text-slate-800 mb-2">Visibilidad de Paquete</h4>
                        <p class="text-sm text-slate-600 mb-4">Utiliza el modificador <code>package-private</code> (sin
                            keyword) para ocultar clases de implementación que no deben ser vistas fuera del
                            módulo/paquete. Esto reduce la superficie de ataque de tu API.</p>
                    </div>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-yellow-100 text-yellow-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            INTERMEDIO</div>
                        <h4 class="font-bold text-slate-800 mb-2">Invariantes en Mutadores</h4>
                        <p class="text-sm text-slate-600 mb-4">Implementa un método <code>setEdad(int edad)</code>.
                            Lanza <code>IllegalArgumentException</code> si la edad es negativa. Esto asegura que el
                            objeto nunca entre en un estado inválido ("Fail Fast").</p>
                    </div>

                    <div
                        class="mb-6 p-6 bg-slate-900 rounded-xl border border-slate-700 shadow-lg relative overflow-hidden text-white">
                        <div
                            class="absolute top-0 right-0 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl">
                            AVANZADO</div>
                        <h4 class="font-bold text-white mb-2">Inmutabilidad y JMM (Java Memory Model)</h4>
                        <p class="text-sm text-slate-400 mb-4">Diseña una clase <code>PuntoGPS</code> inmutable. Usa
                            <code>final</code> en todos los campos. Según la JLS §17.5, los campos finales tienen una
                            semántica de memoria especial (Freeze Action) que garantiza que otros hilos vean los valores
                            correctamente inicializados sin necesidad de sincronización explícita.
                        </p>
                        <button onclick="toggleSolution('sol-7')"
                            class="text-xs bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded transition">Ver
                            Solución</button>
                        <div id="sol-7" class="hidden mt-4 pt-4 border-t border-slate-700">
                            <pre><code class="language-java">public final class PuntoGPS { // Clase final evita herencia maligna
    private final double lat; 
    private final double lon;

    public PuntoGPS(double lat, double lon) {
        this.lat = lat;
        this.lon = lon;
    }
    // No existen setters. Thread-safe por diseño.
}</code></pre>
                        </div>
                    </div>

                    <div class="mt-10 pt-8 border-t border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-4">Quiz de Validación</h3>
                        <div class="space-y-3 text-sm">
                            <p><strong>1. ¿Por qué es preferible la inmutabilidad en entornos concurrentes?</strong></p>
                            <div class="grid grid-cols-2 gap-2">
                                <div class="quiz-option border rounded p-2 text-center"
                                    onclick="alert('¡Correcto! No hay race conditions si nada cambia.')">Elimina
                                    condiciones de carrera.</div>
                                <div class="quiz-option border rounded p-2 text-center">Consume menos memoria.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="lesson-8" class="lesson-section hidden animate-fade-in-up lesson-content">
                    <div class="mb-8 border-b border-slate-200 pb-6">
                        <div class="flex items-center gap-3 mb-2">
                            <span
                                class="px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-bold uppercase tracking-wider">Lección
                                08</span>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-black text-slate-900 tracking-tight mb-4">Polimorfismo:
                            vTables y Dynamic Dispatch</h1>
                    </div>

                    <div
                        class="bg-white rounded-2xl p-8 shadow-lg shadow-purple-900/5 border-l-4 border-purple-600 mb-10">
                        <h3 class="!mt-0 text-xl font-bold text-slate-800 mb-4">
                            El Secreto Senior: Virtual Method Table (vtable)
                        </h3>
                        <p class="text-slate-600 mb-4">El polimorfismo no es magia; es una estructura de datos. Cuando
                            llamas a <code>animal.hacerSonido()</code>, el compilador emite la instrucción de bytecode
                            <code>invokevirtual</code>.
                        </p>
                        <p class="text-slate-600">En <strong>Runtime</strong>, la JVM no sabe qué método ejecutar hasta
                            que mira la cabecera del objeto en el Heap. Allí encuentra un puntero a la
                            <strong>vtable</strong> de la clase concreta, busca el índice del método y salta a la
                            dirección de memoria del código ejecutable. Esto se llama <strong>Late Binding</strong> o
                            Despacho Dinámico.
                        </p>

                    </div>

                    <h2>1. IS-A Relationship y el Principio de Sustitución de Liskov</h2>
                    <p>La herencia establece una relación fuerte. Según el principio de Liskov (SOLID), una subclase
                        debe poder sustituir a su clase base sin romper el programa. El polimorfismo permite escribir
                        código genérico que funciona con implementaciones futuras desconocidas en tiempo de compilación.
                    </p>

                    <h2 class="text-slate-900 border-none mb-6 mt-12"><i
                            class="fas fa-dumbbell text-purple-600 mr-2"></i>Training Ground</h2>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            BÁSICO</div>
                        <h4 class="font-bold text-slate-800 mb-2">Sobrescritura Correcta</h4>
                        <p class="text-sm text-slate-600 mb-4">Usa siempre <code>@Override</code>. Si cometes un error
                            en el nombre o firma del método, el compilador te avisará. Sin la anotación, podrías estar
                            creando una sobrecarga (Overload) accidental en lugar de una sobrescritura (Override).</p>
                    </div>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-yellow-100 text-yellow-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            INTERMEDIO</div>
                        <h4 class="font-bold text-slate-800 mb-2">La palabra clave 'super'</h4>
                        <p class="text-sm text-slate-600 mb-4">Entiende la cadena de invocación. En un método
                            sobrescrito, usa <code>super.metodo()</code> para aprovechar la lógica base y extenderla, en
                            lugar de reemplazarla completamente. Es un patrón Decorator implícito.</p>
                    </div>

                    <div
                        class="mb-6 p-6 bg-slate-900 rounded-xl border border-slate-700 shadow-lg relative overflow-hidden text-white">
                        <div
                            class="absolute top-0 right-0 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl">
                            AVANZADO</div>
                        <h4 class="font-bold text-white mb-2">Polimorfismo Heterogéneo</h4>
                        <p class="text-sm text-slate-400 mb-4">Crea un Array <code>Empleado[]</code>. Almacena
                            instancias de <code>Gerente</code>, <code>Ingeniero</code> y <code>Becario</code>. Itera el
                            array e invoca <code>trabajar()</code>. Observa cómo la JVM resuelve diferentes
                            comportamientos en tiempo real sin condicionales <code>if/else</code>.</p>
                        <button onclick="toggleSolution('sol-8')"
                            class="text-xs bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded transition">Ver
                            Solución</button>
                        <div id="sol-8" class="hidden mt-4 pt-4 border-t border-slate-700">
                            <pre><code class="language-java">Empleado[] nomina = { new Gerente(), new Ingeniero(), new Becario() };

// Bytecode: invokevirtual #Method Empleado.trabajar
// CPU Runtime: Busca en la vtable de cada objeto real.
for (Empleado e : nomina) {
    e.trabajar(); 
}</code></pre>
                        </div>
                    </div>

                    <div class="mt-10 pt-8 border-t border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-4">Quiz de Validación</h3>
                        <div class="space-y-3 text-sm">
                            <p><strong>1. ¿Qué instrucción de bytecode gestiona el polimorfismo de métodos de
                                    instancia?</strong></p>
                            <div class="grid grid-cols-2 gap-2">
                                <div class="quiz-option border rounded p-2 text-center">invokestatic</div>
                                <div class="quiz-option border rounded p-2 text-center"
                                    onclick="alert('¡Correcto! Resuelve en tiempo de ejecución.')">invokevirtual</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="lesson-9" class="lesson-section hidden animate-fade-in-up lesson-content">
                    <div class="mb-8 border-b border-slate-200 pb-6">
                        <div class="flex items-center gap-3 mb-2">
                            <span
                                class="px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-bold uppercase tracking-wider">Lección
                                09</span>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-black text-slate-900 tracking-tight mb-4">Interfaces:
                            Contratos y Desacoplamiento (ISP)</h1>
                    </div>

                    <p class="text-slate-600 mb-6">En arquitectura moderna, se prefiere la composición y las interfaces
                        sobre la herencia de clases ("Composition over Inheritance"). Las interfaces definen capacidades
                        (<strong>CAN-DO</strong>) independientemente de la jerarquía (<strong>IS-A</strong>). Esto
                        permite sistemas modulares y testables.</p>



                    [Image of UML class diagram implementing interfaces]


                    <h3 class="text-xl font-bold text-slate-800 mt-8 mb-4">Evolución de APIs: Default Methods</h3>
                    <p class="text-slate-600 mb-4">Java 8 introdujo métodos <code>default</code>. Esto permite añadir
                        funcionalidad a una interfaz sin romper la compatibilidad binaria con las clases que ya la
                        implementan. Internamente, la JVM usa <code>invokeinterface</code>, que es ligeramente más lento
                        que <code>invokevirtual</code> debido a la búsqueda en tablas de interfaces (iTable), aunque
                        altamente optimizado en HotSpot.</p>

                    <h2 class="text-slate-900 border-none mb-6 mt-12"><i
                            class="fas fa-dumbbell text-purple-600 mr-2"></i>Training Ground</h2>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            BÁSICO</div>
                        <h4 class="font-bold text-slate-800 mb-2">Interface Segregation Principle (ISP)</h4>
                        <p class="text-sm text-slate-600 mb-4">En lugar de una interfaz gigante <code>Trabajador</code>,
                            crea interfaces pequeñas <code>Codificador</code> y <code>Entrevistador</code>. Haz que las
                            clases implementen solo lo que necesitan. Evita interfaces "Dios".</p>
                    </div>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-yellow-100 text-yellow-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            INTERMEDIO</div>
                        <h4 class="font-bold text-slate-800 mb-2">Herencia Múltiple de Comportamiento</h4>
                        <p class="text-sm text-slate-600 mb-4">Implementa dos interfaces que tengan un método
                            <code>default</code> con el mismo nombre. Resuelve el conflicto del "Diamond Problem"
                            sobrescribiendo el método en la clase concreta y eligiendo cuál llamar
                            (<code>InterfazA.super.metodo()</code>).
                        </p>
                    </div>

                    <div
                        class="mb-6 p-6 bg-slate-900 rounded-xl border border-slate-700 shadow-lg relative overflow-hidden text-white">
                        <div
                            class="absolute top-0 right-0 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl">
                            AVANZADO</div>
                        <h4 class="font-bold text-white mb-2">Inyección de Dependencias (DI) Manual</h4>
                        <p class="text-sm text-slate-400 mb-4">Aplica el Principio de Inversión de Dependencias (DIP).
                            Crea una clase de alto nivel <code>Juego</code> que no dependa de clases concretas (Avion,
                            Pajaro), sino de una abstracción <code>Volador</code>. Inyecta la dependencia concreta vía
                            constructor.</p>
                        <button onclick="toggleSolution('sol-9')"
                            class="text-xs bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded transition">Ver
                            Solución</button>
                        <div id="sol-9" class="hidden mt-4 pt-4 border-t border-slate-700">
                            <pre><code class="language-java">// Desacoplamiento total: Juego no conoce a Avion ni a Pajaro
class Juego {
    private final Volador unidad; // Programar contra interfaz

    // Constructor Injection
    public Juego(Volador v) { 
        this.unidad = v; 
    } 

    public void jugar() { unidad.volar(); }
}</code></pre>
                        </div>
                    </div>

                    <div class="mt-10 pt-8 border-t border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-4">Quiz de Validación</h3>
                        <div class="space-y-3 text-sm">
                            <p><strong>1. ¿Qué principio SOLID promueve el uso de interfaces pequeñas y
                                    específicas?</strong></p>
                            <div class="grid grid-cols-2 gap-2">
                                <div class="quiz-option border rounded p-2 text-center">Open/Closed</div>
                                <div class="quiz-option border rounded p-2 text-center"
                                    onclick="alert('¡Correcto! Interface Segregation Principle.')">ISP</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="lesson-10" class="lesson-section hidden animate-fade-in-up lesson-content">
                    <div class="mb-8 border-b border-slate-200 pb-6">
                        <div class="flex items-center gap-3 mb-2">
                            <span
                                class="px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-bold uppercase tracking-wider">Lección
                                10</span>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-black text-slate-900 tracking-tight mb-4">Data Modeling
                            Moderno: Records & Enums</h1>
                    </div>

                    <div class="bg-purple-50 p-6 rounded-xl border border-purple-100 mb-8">
                        <h3 class="font-bold text-purple-900 mb-2">Semántica de Datos Pura</h3>
                        <p class="text-sm text-purple-800">Java 14 introdujo los <strong>Records</strong>. No son solo
                            "clases cortas". Son portadores transparentes de datos inmutables. A nivel de JVM, extienden
                            de <code>java.lang.Record</code>. Su semántica de igualdad (<code>equals/hashCode</code>)
                            está basada en el contenido de todos sus componentes, ideal para claves de Mapas o DTOs.</p>
                    </div>

                    <h3 class="text-xl font-bold text-slate-800 mt-8 mb-4">Enums: Singleton Pattern por Excelencia</h3>
                    <p class="text-slate-600 mb-4">En Java, los <code>enum</code> son mucho más que constantes enteras
                        (como en C). Son clases completas que heredan de <code>java.lang.Enum</code>. Garantizan, por
                        especificación de la JVM, que solo existe una instancia por constante (Singleton Pattern
                        Thread-Safe y resistente a la serialización).</p>

                    <h2 class="text-slate-900 border-none mb-6 mt-12"><i
                            class="fas fa-dumbbell text-purple-600 mr-2"></i>Training Ground</h2>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            BÁSICO</div>
                        <h4 class="font-bold text-slate-800 mb-2">Canonical Constructor en Records</h4>
                        <p class="text-sm text-slate-600 mb-4">Define un record <code>Rango(int min, int max)</code>.
                            Usa el constructor compacto (sin paréntesis) para validar que <code>min &lt; max</code>. Si
                            no, lanza excepción. Esto garantiza que es imposible crear un Rango inválido.</p>
                    </div>

                    <div
                        class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                        <div
                            class="absolute top-0 right-0 bg-yellow-100 text-yellow-700 text-xs font-bold px-3 py-1 rounded-bl-xl">
                            INTERMEDIO</div>
                        <h4 class="font-bold text-slate-800 mb-2">Enums con Estado y Comportamiento</h4>
                        <p class="text-sm text-slate-600 mb-4">Crea un enum <code>Planeta</code> con atributos
                            <code>masa</code> y <code>radio</code>. Implementa un método <code>gravedad()</code> que
                            calcule la física real para cada constante.
                        </p>
                    </div>

                    <div
                        class="mb-6 p-6 bg-slate-900 rounded-xl border border-slate-700 shadow-lg relative overflow-hidden text-white">
                        <div
                            class="absolute top-0 right-0 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl">
                            AVANZADO</div>
                        <h4 class="font-bold text-white mb-2">Strategy Pattern con Enums</h4>
                        <p class="text-sm text-slate-400 mb-4">Utiliza el polimorfismo de constantes (Constant-specific
                            class bodies). Crea un Enum <code>Operacion</code> donde cada constante (SUMA, RESTA)
                            implemente su propia versión de un método abstracto <code>aplicar</code>. Esto elimina los
                            <code>switch</code> y sigue el principio Open/Closed.
                        </p>
                        <button onclick="toggleSolution('sol-10')"
                            class="text-xs bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded transition">Ver
                            Solución</button>
                        <div id="sol-10" class="hidden mt-4 pt-4 border-t border-slate-700">
                            <pre><code class="language-java">enum Operacion {
    SUMA { 
        @Override public int aplicar(int x, int y) { return x + y; } 
    },
    MULTIPLICACION { 
        @Override public int aplicar(int x, int y) { return x * y; } 
    };

    public abstract int aplicar(int x, int y);
}
// Bytecode genera clases anónimas internas para cada constante: Operacion$1, Operacion$2</code></pre>
                        </div>
                    </div>

                    <div class="mt-10 pt-8 border-t border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-4">Quiz de Validación</h3>
                        <div class="space-y-3 text-sm">
                            <p><strong>1. ¿Son mutables los componentes de un Record?</strong></p>
                            <div class="grid grid-cols-2 gap-2">
                                <div class="quiz-option border rounded p-2 text-center"
                                    onclick="alert('¡Correcto! Son private final implícitamente.')">No, son inmutables.
                                </div>
                                <div class="quiz-option border rounded p-2 text-center">Sí, tienen setters.</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <footer class="mt-20 py-8 text-center text-slate-400 text-sm border-t border-slate-200">
                <p>&copy; 2025 Java Masterclass. Arquitectura Orientada a Objetos.</p>
            </footer>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-java.min.js"></script>
    <script src="../assets/scriptFooter.js"></script>
</body>

</html>