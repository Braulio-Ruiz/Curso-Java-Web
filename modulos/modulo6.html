<!DOCTYPE html>
<html lang="es" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M贸dulo 6 | Arquitectura de Datos Elite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], },
                    animation: { 'fade-in-up': 'fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards', },
                    keyframes: { fadeInUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' }, }, }
                }
            }
        }
    </script>
</head>

<body
    class="flex flex-col h-screen bg-slate-50 text-slate-800 antialiased selection:bg-emerald-500 selection:text-white overflow-hidden">

    <nav
        class="fixed w-full z-50 bg-slate-900/95 backdrop-blur-md border-b border-slate-700/50 text-white h-16 flex items-center justify-between px-6 shadow-lg">
        <div class="flex items-center gap-4">
            <a href="../index.html"
                class="group flex items-center gap-2 text-slate-300 hover:text-white transition-all bg-white/5 hover:bg-white/10 px-4 py-2 rounded-lg border border-white/10 hover:border-white/20">
                <i class="fas fa-arrow-left text-sm group-hover:-translate-x-1 transition-transform"></i>
                <span class="text-sm font-medium">Dashboard</span>
            </a>
            <div class="h-6 w-px bg-slate-700 mx-2"></div>
            <div class="flex items-center gap-3">
                <div class="bg-emerald-600/20 p-2 rounded-lg border border-emerald-500/30 text-emerald-400">
                    <i class="fas fa-database text-lg"></i>
                </div>
                <div>
                    <h1 class="font-bold text-sm tracking-wide leading-none">M贸dulo 06</h1>
                    <span class="text-xs text-slate-400 font-medium">Persistencia de Datos</span>
                </div>
            </div>
        </div>
        <div class="hidden md:flex items-center gap-4">
            <div
                class="flex items-center gap-2 px-3 py-1.5 bg-emerald-900/30 rounded-full border border-emerald-500/20">
                <span class="relative flex h-2 w-2">
                    <span
                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                </span>
                <span class="text-xs font-semibold text-emerald-300">Java 21 LTS</span>
            </div>
        </div>
    </nav>

    <div class="flex flex-1 pt-16 h-full overflow-hidden">
        <aside class="w-80 bg-white border-r border-slate-200 shadow-xl z-20 hidden md:flex flex-col">
            <div class="p-6 border-b border-slate-100 bg-slate-50/50">
                <h3 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-1">Plan de Estudio</h3>
                <p class="text-sm text-slate-600 font-medium">3 Lecciones Cr铆ticas</p>
            </div>
            <div class="flex-1 overflow-y-auto custom-scrollbar p-4 space-y-2">
                <button onclick="showLesson(25)" id="btn-25"
                    class="nav-btn w-full text-left px-4 py-4 rounded-xl text-sm font-medium transition-all duration-200 border border-transparent hover:bg-emerald-50 hover:border-emerald-200 group relative overflow-hidden active">
                    <div class="relative z-10 flex items-center gap-3">
                        <span
                            class="flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold group-hover:bg-white group-hover:shadow-sm transition-all btn-icon">25</span>
                        <span class="text-slate-600 group-hover:text-slate-900 btn-text">SQL, JDBC & Security</span>
                    </div>
                    <div
                        class="absolute left-0 top-0 bottom-0 w-1 bg-emerald-600 opacity-0 btn-indicator transition-opacity">
                    </div>
                </button>
                <button onclick="showLesson(26)" id="btn-26"
                    class="nav-btn w-full text-left px-4 py-4 rounded-xl text-sm font-medium transition-all duration-200 border border-transparent hover:bg-emerald-50 hover:border-emerald-200 group relative overflow-hidden">
                    <div class="relative z-10 flex items-center gap-3">
                        <span
                            class="flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold group-hover:bg-white group-hover:shadow-sm transition-all btn-icon">26</span>
                        <span class="text-slate-600 group-hover:text-slate-900 btn-text">JPA & Hibernate Core</span>
                    </div>
                    <div
                        class="absolute left-0 top-0 bottom-0 w-1 bg-emerald-600 opacity-0 btn-indicator transition-opacity">
                    </div>
                </button>
                <button onclick="showLesson(27)" id="btn-27"
                    class="nav-btn w-full text-left px-4 py-4 rounded-xl text-sm font-medium transition-all duration-200 border border-transparent hover:bg-emerald-50 hover:border-emerald-200 group relative overflow-hidden">
                    <div class="relative z-10 flex items-center gap-3">
                        <span
                            class="flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold group-hover:bg-white group-hover:shadow-sm transition-all btn-icon">27</span>
                        <span class="text-slate-600 group-hover:text-slate-900 btn-text">JSON & REST Architecture</span>
                    </div>
                    <div
                        class="absolute left-0 top-0 bottom-0 w-1 bg-emerald-600 opacity-0 btn-indicator transition-opacity">
                    </div>
                </button>
            </div>
        </aside>

        <main class="flex-1 overflow-y-auto relative bg-slate-50 scroll-smooth">
            <div class="max-w-5xl mx-auto px-8 py-12 relative z-10">

                <div id="lesson-25" class="lesson-section active animate-fade-in-up lesson-content">
                    <div class="mb-8 border-b border-slate-200 pb-6">
                        <div class="flex items-center gap-3 mb-2">
                            <span
                                class="px-3 py-1 rounded-full bg-emerald-100 text-emerald-700 text-xs font-bold uppercase tracking-wider">Lecci贸n
                                25</span>
                            <span class="text-slate-400 text-sm font-medium"><i class="far fa-clock mr-1"></i> 40
                                min</span>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-black text-slate-900 tracking-tight mb-4">SQL Nativo, JDBC
                            y Seguridad</h1>
                    </div>

                    <div
                        class="bg-white rounded-2xl p-8 shadow-lg shadow-emerald-900/5 border-l-4 border-emerald-600 mb-10">
                        <h3 class="!mt-0 text-xl font-bold text-slate-800 mb-4 flex items-center gap-2"><i
                                class="fas fa-bullseye text-emerald-600"></i> Objetivos Senior</h3>
                        <ul class="list-disc list-inside text-slate-600 text-sm space-y-2">
                            <li><strong>Connection Pooling:</strong> Por qu茅 HikariCP es superior a
                                <code>DriverManager</code>.</li>
                            <li><strong>SQL Injection:</strong> Anatom铆a de un ataque y prevenci贸n con
                                <code>PreparedStatement</code>.</li>
                            <li><strong>Transacciones ACID:</strong> Commit, Rollback y niveles de aislamiento.</li>
                        </ul>
                    </div>

                    <h2>1. El Puente de Datos (JDBC Driver)</h2>
                    <p class="text-slate-600 mb-6">JDBC (Java Database Connectivity) es la especificaci贸n de bajo nivel.
                        El <strong>Driver</strong> act煤a como un traductor universal que convierte llamadas Java en el
                        protocolo binario nativo de la base de datos (PostgreSQL Wire Protocol, MySQL Protocol, etc.).
                    </p>
                    <p class="text-slate-600 mb-6">Abrir una conexi贸n TCP es costoso (3-way handshake). En producci贸n,
                        NUNCA uses <code>DriverManager.getConnection()</code> directamente para cada petici贸n. Usa un
                        <strong>Pool de Conexiones</strong> (como HikariCP) que mantiene conexiones vivas listas para
                        reusar.</p>

                    <h3 class="text-xl font-bold text-slate-800 mt-8 mb-4">2. SQL Injection: El Enemigo #1</h3>
                    <div class="bg-red-50 border-l-4 border-red-500 p-6 rounded-r-xl mb-8">
                        <h4 class="font-bold text-red-800 mb-1"><i class="fas fa-shield-alt mr-2"></i>Vulnerabilidad
                            Cr铆tica</h4>
                        <p class="text-red-700 text-sm mb-2">Si concatenas Strings:
                            <code>"SELECT * FROM users WHERE name = '" + name + "'"</code>, un atacante puede ingresar
                            <code>' OR '1'='1</code> y acceder a todos los registros o borrar la tabla
                            (<code>DROP TABLE</code>).</p>
                        <p class="text-red-800 font-bold text-sm">Soluci贸n: SIEMPRE usa <code>PreparedStatement</code>.
                            Esto env铆a la plantilla SQL y los datos por separado al motor de base de datos, tratando los
                            inputs como literales puros, nunca como c贸digo ejecutable.</p>
                    </div>

                    <div class="code-window bg-[#1e1e1e] mb-8">
                        <div class="flex items-center gap-2 px-4 py-2 border-b border-slate-700 bg-slate-800/50">
                            <span class="text-xs text-slate-400 font-mono ml-2">SecureDAO.java</span>
                        </div>
                        <pre><code class="language-java">public class UsuarioDAO {
    // 1. Consulta parametrizada (Placeholders '?')
    private static final String SQL_INSERT = "INSERT INTO usuarios (nombre, email) VALUES (?, ?)";

    public void guardar(Usuario u) {
        // 2. Try-with-resources cierra Connection y Statement autom谩ticamente
        try (Connection conn = DataSource.getConnection();
             PreparedStatement stmt = conn.prepareStatement(SQL_INSERT)) {
            
            // 3. Asignaci贸n segura de tipos (Setters)
            stmt.setString(1, u.getNombre());
            stmt.setString(2, u.getEmail());
            
            stmt.executeUpdate(); // Ejecuta
        } catch (SQLException e) {
            throw new DataAccessException("Error guardando usuario", e);
        }
    }
}</code></pre>
                    </div>

                    <h2 class="text-slate-900 mt-12 mb-6 border-none"><i
                            class="fas fa-dumbbell text-emerald-600 mr-2"></i>Training Ground</h2>

                    <div class="mb-6 p-6 bg-slate-100 rounded-xl border-l-4 border-green-500">
                        <span class="text-xs font-bold text-green-600 uppercase mb-2 block"> Nivel B谩sico</span>
                        <h4 class="font-bold text-slate-800">Conexi贸n Segura</h4>
                        <p class="text-sm text-slate-600 mb-4">Escribe un m茅todo que se conecte a una base de datos H2
                            en memoria y cree una tabla <code>productos</code> usando <code>Statement</code>.</p>
                    </div>

                    <div class="mb-6 p-6 bg-slate-100 rounded-xl border-l-4 border-yellow-500">
                        <span class="text-xs font-bold text-yellow-600 uppercase mb-2 block"> Nivel Intermedio</span>
                        <h4 class="font-bold text-slate-800">Lectura Mapeada (ResultSet)</h4>
                        <p class="text-sm text-slate-600 mb-4">Ejecuta un <code>SELECT * FROM productos</code>. Itera
                            sobre el <code>ResultSet</code> y mapea cada fila a un objeto Java <code>Producto</code>.
                            Devuelve una <code>List&lt;Producto&gt;</code>.</p>
                    </div>

                    <div class="mb-8 p-6 bg-slate-900 rounded-xl border border-slate-700 text-white">
                        <span class="text-xs font-bold text-emerald-500 uppercase mb-2 block"> Nivel Avanzado</span>
                        <h4 class="font-bold text-white">Transacci贸n Bancaria (ACID)</h4>
                        <p class="text-sm text-slate-400 mb-4">Implementa una transferencia de dinero at贸mica. Debes
                            restar de la cuenta A y sumar a la cuenta B. Si la suma falla, la resta debe revertirse
                            (Rollback). Usa <code>conn.setAutoCommit(false)</code>.</p>
                        <button onclick="toggleSolution('sol-25')"
                            class="text-xs bg-emerald-600 hover:bg-emerald-500 text-white px-3 py-1 rounded transition">Ver
                            Soluci贸n</button>
                        <div id="sol-25" class="hidden mt-4 pt-4 border-t border-slate-700">
                            <pre><code class="language-java">try (Connection conn = ds.getConnection()) {
    conn.setAutoCommit(false); // Inicio de la Transacci贸n
    try {
        debitar(conn, idOrigen, monto);
        acreditar(conn, idDestino, monto);
        conn.commit(); // Confirmar cambios (Todo o nada)
    } catch (Exception e) {
        conn.rollback(); // Deshacer cambios si hay error
        throw e;
    }
}</code></pre>
                        </div>
                    </div>

                    <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-6">Quiz de Validaci贸n</h3>
                        <div class="space-y-4">
                            <div>
                                <p class="text-sm font-semibold mb-2">1. 驴Qu茅 objeto JDBC previene la Inyecci贸n SQL?</p>
                                <div class="grid grid-cols-2 gap-2">
                                    <button class="quiz-btn border p-2 rounded text-sm hover:bg-slate-50"
                                        onclick="checkQuiz(this, false)">Statement</button>
                                    <button class="quiz-btn border p-2 rounded text-sm hover:bg-slate-50"
                                        onclick="checkQuiz(this, true)">PreparedStatement</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="lesson-26" class="lesson-section hidden animate-fade-in-up lesson-content">
                    <div class="mb-8 border-b border-slate-200 pb-6">
                        <div class="flex items-center gap-3 mb-2">
                            <span
                                class="px-3 py-1 rounded-full bg-emerald-100 text-emerald-700 text-xs font-bold uppercase tracking-wider">Lecci贸n
                                26</span>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-black text-slate-900 tracking-tight mb-4">JPA y Hibernate:
                            ORM Avanzado</h1>
                    </div>

                    <div
                        class="bg-white rounded-2xl p-8 shadow-lg shadow-emerald-900/5 border-l-4 border-emerald-600 mb-10">
                        <p class="text-slate-600">Escribir SQL a mano es tedioso. <strong>JPA (Java Persistence
                                API)</strong> es el est谩ndar para mapear objetos Java a tablas relacionales. Hibernate
                            es el motor (provider) m谩s robusto. Entender el "Entity Lifecycle" es crucial para evitar
                            bugs de persistencia.</p>
                    </div>



                    <h2>1. Ciclo de Vida de una Entidad</h2>
                    <p class="text-slate-600 mb-6">Una entidad JPA no es un simple objeto. Puede estar en 4 estados
                        gestionados por el <code>EntityManager</code> (Persistence Context):</p>
                    <ul class="list-disc list-inside text-slate-600 ml-4 mb-4">
                        <li><strong>Transient:</strong> Objeto nuevo, no asociado a DB.</li>
                        <li><strong>Managed:</strong> Asociado a la sesi贸n actual. Cambios se sincronizan
                            autom谩ticamente.</li>
                        <li><strong>Detached:</strong> Sesi贸n cerrada. Cambios no se guardan.</li>
                        <li><strong>Removed:</strong> Marcado para eliminar.</li>
                    </ul>

                    <h3 class="text-xl font-bold text-slate-800 mt-8 mb-4">2. Dirty Checking (Optimizaci贸n)</h3>
                    <p class="text-slate-600 mb-4">Si una entidad est谩 en estado <strong>Managed</strong>, no necesitas
                        llamar a <code>save()</code> o <code>update()</code> expl铆citamente. Hibernate detecta
                        autom谩ticamente si modificaste alg煤n atributo al hacer commit de la transacci贸n y lanza el
                        <code>UPDATE</code> SQL necesario. Esto minimiza las consultas innecesarias.</p>

                    <h2 class="text-slate-900 mt-12 mb-6 border-none"><i
                            class="fas fa-dumbbell text-emerald-600 mr-2"></i>Training Ground</h2>

                    <div class="mb-6 p-6 bg-slate-100 rounded-xl border-l-4 border-green-500">
                        <span class="text-xs font-bold text-green-600 uppercase mb-2 block"> Nivel B谩sico</span>
                        <h4 class="font-bold text-slate-800">Mapeo de Entidad</h4>
                        <p class="text-sm text-slate-600 mb-4">Crea una clase <code>Estudiante</code>. An贸tala con
                            <code>@Entity</code>, define una clave primaria con <code>@Id</code> y
                            <code>@GeneratedValue(strategy = GenerationType.IDENTITY)</code>.</p>
                    </div>

                    <div class="mb-6 p-6 bg-slate-100 rounded-xl border-l-4 border-yellow-500">
                        <span class="text-xs font-bold text-yellow-600 uppercase mb-2 block"> Nivel Intermedio</span>
                        <h4 class="font-bold text-slate-800">Relaciones 1:N</h4>
                        <p class="text-sm text-slate-600 mb-4">Modela la relaci贸n: Un <code>Autor</code> tiene muchos
                            <code>Libros</code>. Usa <code>@OneToMany(mappedBy="autor")</code> en el lado del Autor y
                            <code>@ManyToOne</code> en el lado del Libro. Configura <code>FetchType.LAZY</code> para
                            evitar cargar toda la base de datos en memoria.</p>
                    </div>

                    <div class="mb-8 p-6 bg-slate-900 rounded-xl border border-slate-700 text-white">
                        <span class="text-xs font-bold text-emerald-500 uppercase mb-2 block"> Nivel Avanzado</span>
                        <h4 class="font-bold text-white">Soluci贸n al LazyInitializationException</h4>
                        <p class="text-sm text-slate-400 mb-4">El error m谩s com煤n en JPA: intentar acceder a una
                            colecci贸n LAZY fuera de la transacci贸n. Soluci贸nalo usando una consulta <strong>JOIN
                                FETCH</strong> en JPQL para cargar los datos en una sola query optimizada.</p>
                        <button onclick="toggleSolution('sol-26')"
                            class="text-xs bg-emerald-600 hover:bg-emerald-500 text-white px-3 py-1 rounded transition">Ver
                            Soluci贸n</button>
                        <div id="sol-26" class="hidden mt-4 pt-4 border-t border-slate-700">
                            <pre><code class="language-java">// JPQL Optimizado: Trae el Autor Y sus Libros en una sola query
String jpql = "SELECT a FROM Autor a JOIN FETCH a.libros WHERE a.id = :id";

Autor autor = entityManager.createQuery(jpql, Autor.class)
    .setParameter("id", 1L)
    .getSingleResult();

// Ahora es seguro acceder a .getLibros() incluso si se cierra el EntityManager
System.out.println(autor.getLibros().size());</code></pre>
                        </div>
                    </div>
                </div>

                <div id="lesson-27" class="lesson-section hidden animate-fade-in-up lesson-content">
                    <div class="mb-8 border-b border-slate-200 pb-6">
                        <div class="flex items-center gap-3 mb-2">
                            <span
                                class="px-3 py-1 rounded-full bg-emerald-100 text-emerald-700 text-xs font-bold uppercase tracking-wider">Lecci贸n
                                27</span>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-black text-slate-900 tracking-tight mb-4">Arquitectura REST
                            & Serializaci贸n JSON</h1>
                    </div>

                    <p class="text-slate-600 mb-6">En la arquitectura moderna, el backend expone datos, no HTML. El
                        formato de intercambio universal es <strong>JSON</strong>. En Java, la librer铆a est谩ndar de
                        facto para esto es <strong>Jackson</strong>.</p>

                    <h3 class="text-xl font-bold text-slate-800 mt-8 mb-4">El Patr贸n DTO (Data Transfer Object)</h3>
                    <div class="bg-red-50 border border-red-200 rounded-xl p-6 mb-8">
                        <h4 class="font-bold text-red-800 mb-2"> Anti-Patr贸n: Exponer Entidades</h4>
                        <p class="text-sm text-red-800">Nunca devuelvas tus entidades JPA (<code>@Entity</code>)
                            directamente en un controlador REST. Esto acopla tu API a tu base de datos (Security Leak),
                            puede exponer datos sensibles (password) y causar errores de recursi贸n infinita en JSON. Usa
                            siempre <strong>DTOs</strong> (preferiblemente Java Records) para definir el contrato de la
                            API.</p>
                    </div>

                    <h2 class="text-slate-900 mt-12 mb-6 border-none"><i
                            class="fas fa-dumbbell text-emerald-600 mr-2"></i>Training Ground</h2>

                    <div class="mb-6 p-6 bg-slate-100 rounded-xl border-l-4 border-green-500">
                        <span class="text-xs font-bold text-green-600 uppercase mb-2 block"> Nivel B谩sico</span>
                        <h4 class="font-bold text-slate-800">Serializaci贸n Simple con Jackson</h4>
                        <p class="text-sm text-slate-600 mb-4">Crea un Record
                            <code>UsuarioDTO(String nombre, String email)</code>. Usa la clase <code>ObjectMapper</code>
                            para convertir una instancia a un String JSON.</p>
                    </div>

                    <div class="mb-6 p-6 bg-slate-100 rounded-xl border-l-4 border-yellow-500">
                        <span class="text-xs font-bold text-yellow-600 uppercase mb-2 block"> Nivel Intermedio</span>
                        <h4 class="font-bold text-slate-800">Control de Visibilidad</h4>
                        <p class="text-sm text-slate-600 mb-4">A帽ade un campo <code>password</code> a tu clase. Usa la
                            anotaci贸n <code>@JsonIgnore</code> para asegurar que Jackson nunca incluya este campo en el
                            JSON generado.</p>
                    </div>

                    <div class="mb-8 p-6 bg-slate-900 rounded-xl border border-slate-700 text-white">
                        <span class="text-xs font-bold text-emerald-500 uppercase mb-2 block"> Nivel Avanzado</span>
                        <h4 class="font-bold text-white">Polimorfismo en JSON</h4>
                        <p class="text-sm text-slate-400 mb-4">Tienes una lista heterog茅nea de <code>Animal</code>
                            (Perro, Gato). Configura Jackson con <code>@JsonTypeInfo</code> y <code>@JsonSubTypes</code>
                            para que al recibir un JSON, sepa instanciar autom谩ticamente la subclase correcta bas谩ndose
                            en un campo discriminador "tipo".</p>
                        <button onclick="toggleSolution('sol-27')"
                            class="text-xs bg-emerald-600 hover:bg-emerald-500 text-white px-3 py-1 rounded transition">Ver
                            Soluci贸n</button>
                        <div id="sol-27" class="hidden mt-4 pt-4 border-t border-slate-700">
                            <pre><code class="language-java">@JsonTypeInfo(
  use = JsonTypeInfo.Id.NAME, 
  include = JsonTypeInfo.As.PROPERTY, 
  property = "tipo"
)
@JsonSubTypes({
  @Type(value = Perro.class, name = "dog"),
  @Type(value = Gato.class, name = "cat")
})
public abstract class Animal { ... }

// Un JSON { "tipo": "dog", "raza": "Labrador" } crear谩 un objeto Perro.</code></pre>
                        </div>
                    </div>
                </div>

            </div>

            <footer class="mt-20 py-8 text-center text-slate-400 text-sm border-t border-slate-200">
                <p>&copy; 2025 Java Elite Bootcamp. Arquitectura de Datos y Backend.</p>
            </footer>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script>
        function showLesson(id) {
            document.querySelectorAll('.lesson-section').forEach(el => {
                el.classList.add('hidden');
                el.classList.remove('active');
            });

            const selected = document.getElementById('lesson-' + id);
            selected.classList.remove('hidden');
            setTimeout(() => selected.classList.add('active'), 10);

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-emerald-50', 'border-emerald-100');
                btn.querySelector('.btn-indicator').classList.remove('opacity-100');
                btn.querySelector('.btn-indicator').classList.add('opacity-0');
                const icon = btn.querySelector('.btn-icon');
                icon.classList.remove('bg-emerald-600', 'text-white');
                icon.classList.add('bg-slate-100', 'text-slate-500');
                btn.querySelector('.btn-text').classList.remove('text-emerald-700', 'font-bold');
            });

            const activeBtn = document.getElementById('btn-' + id);
            activeBtn.classList.add('active', 'bg-emerald-50', 'border-emerald-100');
            activeBtn.querySelector('.btn-indicator').classList.add('opacity-100');
            activeBtn.querySelector('.btn-indicator').classList.remove('opacity-0');
            const activeIcon = activeBtn.querySelector('.btn-icon');
            activeIcon.classList.remove('bg-slate-100', 'text-slate-500');
            activeIcon.classList.add('bg-emerald-600', 'text-white');
            activeBtn.querySelector('.btn-text').classList.add('text-emerald-700', 'font-bold');

            document.querySelector('main').scrollTop = 0;
        }

        function toggleSolution(id) {
            const el = document.getElementById(id);
            el.classList.toggle('hidden');
        }

        function checkQuiz(btn, isCorrect) {
            const parent = btn.parentElement;
            parent.querySelectorAll('.quiz-btn').forEach(b => {
                b.classList.remove('correct', 'wrong');
            });
            if (isCorrect) {
                btn.classList.add('correct');
            } else {
                btn.classList.add('wrong');
            }
        }

        // Init
        showLesson(25);
    </script>
</body>

</html>